if(typeof magic!="function")var magic=function(){};magic.resourcePath="",magic.skinName="default",magic.version="1.1.0.4",/msie 6/i.test(navigator.userAgent)&&document.execCommand("BackgroundImageCache",!1,!0);var T,baidu=T=baidu||function(e,t){return baidu.dom?baidu.dom(e,t):null};baidu.version="2.0.2.5",baidu.guid="$BAIDU$",baidu.key="tangram_guid";var _=window[baidu.guid]=window[baidu.guid]||{};(_.versions||(_.versions=[])).push(baidu.version),baidu.check=baidu.check||function(){},baidu.lang=baidu.lang||{},baidu.forEach=function(e,t,n){var r,i,s;if(typeof t=="function"&&e){i=typeof e.length=="number"?e.length:e.byteLength;if(typeof i=="number"){if(Object.prototype.toString.call(e)==="[object Function]")return e;for(r=0;r<i;r++)s=e[r],s===undefined&&(s=e.charAt&&e.charAt(r)),t.call(n||null,s,r,e)}else if(typeof e=="number")for(r=0;r<e;r++)t.call(n||null,r,r,r);else if(typeof e=="object")for(r in e)e.hasOwnProperty(r)&&t.call(n||null,e[r],r,e)}return e},baidu.type=function(){var e={},t=[,"HTMLElement","Attribute","Text",,,,,"Comment","Document",,"DocumentFragment"],n="Array Boolean Date Error Function Number RegExp String",r={object:1,"function":"1"},i=e.toString;return baidu.forEach(n.split(" "),function(t){e["[object "+t+"]"]=t.toLowerCase(),baidu["is"+t]=function(e){return baidu.type(e)==t.toLowerCase()}}),function(n){var s=typeof n;return r[s]?n==null?"null":n._type_||e[i.call(n)]||t[n.nodeType]||(n==n.window?"Window":"")||"object":s}}(),baidu.isDate=function(e){return baidu.type(e)=="date"&&e.toString()!="Invalid Date"&&!isNaN(e)},baidu.isElement=function(e){return baidu.type(e)=="HTMLElement"},baidu.isEnumerable=function(e){return e!=null&&(typeof e=="object"||~Object.prototype.toString.call(e).indexOf("NodeList"))&&(typeof e.length=="number"||typeof e.byteLength=="number"||typeof e[0]!="undefined")},baidu.isNumber=function(e){return baidu.type(e)=="number"&&isFinite(e)},baidu.isPlainObject=function(e){var t,n=Object.prototype.hasOwnProperty;if(baidu.type(e)!="object")return!1;if(e.constructor&&!n.call(e,"constructor")&&!n.call(e.constructor.prototype,"isPrototypeOf"))return!1;for(t in e);return t===undefined||n.call(e,t)},baidu.isObject=function(e){return typeof e=="function"||typeof e=="object"&&e!=null},baidu.global=baidu.global||function(){var e=baidu._global_=window[baidu.guid],t=e._=e._||{};return function(e,n,r){return typeof n!="undefined"?(r||(n=typeof t[e]=="undefined"?n:t[e]),t[e]=n):e&&typeof t[e]=="undefined"&&(t[e]={}),t[e]}}(),baidu.extend=function(e,t){var n,r,i,s,o,u=1,a=arguments.length,f=e||{},l,c;baidu.isBoolean(e)&&(u=2)&&(f=t||{}),!baidu.isObject(f)&&(f={});for(;u<a;u++){r=arguments[u];if(baidu.isObject(r))for(i in r){s=f[i],o=r[i];if(s===o)continue;baidu.isBoolean(e)&&e&&o&&(baidu.isPlainObject(o)||(l=baidu.isArray(o)))?(l?(l=!1,c=s&&baidu.isArray(s)?s:[]):c=s&&baidu.isPlainObject(s)?s:{},f[i]=baidu.extend(e,c,o)):o!==undefined&&(f[i]=o)}}return f},baidu.browser=baidu.browser||function(){var e=navigator.userAgent,t={isStrict:document.compatMode=="CSS1Compat",isGecko:/gecko/i.test(e)&&!/like gecko/i.test(e),isWebkit:/webkit/i.test(e)};try{/(\d+\.\d+)/.test(external.max_version)&&(t.maxthon=+RegExp.$1)}catch(n){}switch(!0){case/msie (\d+\.\d+)/i.test(e):t.ie=document.documentMode||+RegExp.$1;break;case/chrome\/(\d+\.\d+)/i.test(e):t.chrome=+RegExp.$1;break;case/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(e)&&!/chrome/i.test(e):t.safari=+(RegExp.$1||RegExp.$2);break;case/firefox\/(\d+\.\d+)/i.test(e):t.firefox=+RegExp.$1;break;case/opera(?:\/| )(\d+(?:\.\d+)?)(.+?(version\/(\d+(?:\.\d+)?)))?/i.test(e):t.opera=+(RegExp.$4||RegExp.$1)}return baidu.extend(baidu,t),t}(),baidu.id=function(){var e=baidu.global("_maps_id"),t=baidu.key;return window[baidu.guid]._counter=window[baidu.guid]._counter||1,function(n,r){var i,s=baidu.isString(n),o=baidu.isObject(n),u=o?n[t]:s?n:"";if(baidu.isString(r))switch(r){case"get":return o?u:e[u];case"remove":case"delete":if(i=e[u])baidu.isElement(i)&&baidu.browser.ie<8?i.removeAttribute(t):delete i[t],delete e[u];return u;default:return s?((i=e[u])&&delete e[u],i&&(e[i[t]=r]=i)):o&&(u&&delete e[u],e[n[t]=r]=n),r}return o?(!u&&(e[n[t]=u=baidu.id()]=n),u):s?e[n]:"TANGRAM_"+baidu._global_._counter++}}(),baidu.createChain=function(e,t,n){var r=e=="dom"?"$DOM":"$"+e.charAt(0).toUpperCase()+e.substr(1),i=Array.prototype.slice,s=baidu[e];return s?s:(s=baidu[e]=t||function(t){return baidu.extend(t,baidu[e].fn)},s.extend=function(t){var n;for(n in t)(function(t){t!="splice"&&(s[t]=function(){var n=arguments[0];e=="dom"&&baidu.type(n)=="string"&&(n="#"+n);var r=s(n),o=r[t].apply(r,i.call(arguments,1));return baidu.type(o)=="$DOM"?o.get(0):o})})(n);return baidu.extend(baidu[e].fn,t)},baidu[e][r]=baidu[e][r]||n||function(){},s.fn=baidu[e][r].prototype,s)},baidu.overwrite=function(e,t,n){for(var r=t.length-1;r>-1;r--)e.prototype[t[r]]=n(t[r]);return e},baidu.createChain("event",function(){var e={};return function(t,n){switch(baidu.type(t)){case"object":return e.originalEvent===t?e:e=new baidu.event.$Event(t);case"$Event":return t}}}(),function(e){var t,n,r,i=this;this._type_="$Event";if(typeof e=="object"&&e.type){i.originalEvent=t=e;for(var s in t)typeof t[s]!="function"&&(i[s]=t[s]);t.extraData&&baidu.extend(i,t.extraData),i.target=i.srcElement=t.srcElement||(n=t.target)&&(n.nodeType==3?n.parentNode:n),i.relatedTarget=t.relatedTarget||(n=t.fromElement)&&(n===i.target?t.toElement:n),i.keyCode=i.which=t.keyCode||t.which,!i.which&&t.button!==undefined&&(i.which=t.button&1?1:t.button&2?3:t.button&4?2:0);var o=document.documentElement,u=document.body;i.pageX=t.pageX||t.clientX+(o&&o.scrollLeft||u&&u.scrollLeft||0)-(o&&o.clientLeft||u&&u.clientLeft||0),i.pageY=t.pageY||t.clientY+(o&&o.scrollTop||u&&u.scrollTop||0)-(o&&o.clientTop||u&&u.clientTop||0),i.data}this.timeStamp=(new Date).getTime()}).extend({stopPropagation:function(){var e=this.originalEvent;e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},preventDefault:function(){var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}}),baidu.merge=function(e,t){var n=e.length,r=0;if(typeof t.length=="number")for(var i=t.length;r<i;r++)e[n++]=t[r];else while(t[r]!==undefined)e[n++]=t[r++];return e.length=n,e},baidu.createChain("array",function(e){var t=baidu.array.$Array.prototype,n=Array.prototype,r;baidu.type(e)!="array"&&(e=[]);for(r in t)e[r]=t[r];return e}),baidu.overwrite(baidu.array.$Array,"concat slice".split(" "),function(e){return function(){return baidu.array(Array.prototype[e].apply(this,arguments))}}),baidu.array.extend({unique:function(e){var t=this.length,n=this.slice(0),r,i;"function"!=typeof e&&(e=function(e,t){return e===t});while(--t>0){i=n[t],r=t;while(r--)if(e(i,n[r])){n.splice(t,1);break}}t=this.length=n.length;for(r=0;r<t;r++)this[r]=n[r];return this}}),baidu.query=baidu.query||function(){function a(t,s){var o,u,a,f,l,c,h,p,d=[];return e.test(t)?(a=RegExp.$2,l=RegExp.$1||"*",baidu.forEach(s.getElementsByTagName(l),function(e){e.id==a&&d.push(e)})):n.test(t)||t=="*"?baidu.merge(d,s.getElementsByTagName(t)):r.test(t)?(h=[],l=RegExp.$1,c=RegExp.$2,o=" "+c+" ",s.getElementsByClassName?h=s.getElementsByClassName(c):baidu.forEach(s.getElementsByTagName("*"),function(e){e.className&&~(" "+e.className+" ").indexOf(o)&&h.push(e)}),l&&(l=l.toUpperCase())?baidu.forEach(h,function(e){e.tagName.toUpperCase()===l&&d.push(e)}):baidu.merge(d,h)):i.test(t)&&(p=t.substr(1).split("."),baidu.forEach(s.getElementsByTagName("*"),function(e){e.className&&(o=" "+e.className+" ",u=!0,baidu.forEach(p,function(e){~o.indexOf(" "+e+" ")||(u=!1)}),u&&d.push(e))})),d}function f(e,n){var r,i=e,s="__tangram__",o=[];return!n&&t.test(i)&&(r=document.getElementById(i.substr(1)))?[r]:(n=n||document,n.querySelectorAll?(n.nodeType==1&&!n.id?(n.id=s,r=n.querySelectorAll("#"+s+" "+i),n.id=""):r=n.querySelectorAll(i),r):~i.indexOf(" ")?(baidu.forEach(a(i.substr(0,i.indexOf(" ")),n),function(e){baidu.merge(o,f(i.substr(i.indexOf(" ")+1),e))}),o):a(i,n))}var e=/^(\w*)#([\w\-\$]+)$/,t=/^#([\w\-\$]+)$/,n=/^\w+$/,r=/^(\w*)\.([\w\-\$]+)$/,i=/^(\.[\w\-\$]+)+$/,s=/\s*,\s*/,o=/\s+/g,u=Array.prototype.slice;return function(e,t,n){if(!e||typeof e!="string")return n||[];var r=[];return e=e.replace(o," "),n&&baidu.merge(r,n)&&(n.length=0),baidu.forEach(e.indexOf(",")>0?e.split(s):[e],function(e){baidu.merge(r,f(e,t))}),baidu.merge(n||[],baidu.array(r).unique())}}(),baidu.createChain("dom",function(e,t){var n,r=new baidu.dom.$DOM(t);if(!e)return r;if(e._type_=="$DOM")return e;if(e.nodeType||e==e.window)return r[0]=e,r.length=1,r;if(e.length&&r.toString.call(e)!="[object String]")return baidu.merge(r,e);if(typeof e=="string")if(e.charAt(0)=="<"&&e.charAt(e.length-1)==">"&&e.length>2){var i=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,s=t&&t._type_==="$DOM"?t[0]:t,o=i.exec(e);s=s&&s.nodeType?s.ownerDocument||s:document,o=o?[s.createElement(o[1])]:baidu.dom.createElements?baidu.dom.createElements(e):[],baidu.merge(r,o)}else baidu.query(e,t,r);else if(typeof e=="function")return r.ready?r.ready(e):r;return r},function(e){this.length=0,this._type_="$DOM",this.context=e||document}).extend({size:function(){return this.length},splice:function(){},get:function(e){return typeof e=="number"?e<0?this[this.length+e]:this[e]:Array.prototype.slice.call(this,0)},toArray:function(){return this.get()}}),baidu.dom.extend({each:function(e){baidu.check("function","baidu.dom.each");var t,n,r=this.length;for(t=0;t<r;t++){n=e.call(this[t],t,this[t],this);if(n===!1||n=="break")break}return this}}),baidu._util_=baidu._util_||{},baidu._util_.eventBase=baidu._util_.eventBase||{},void function(e,t){if(e.listener)return;t=e.listener={},window.addEventListener?t.add=function(e,t,n){e.addEventListener(t,n,!1)}:window.attachEvent&&(t.add=function(e,t,n){e.attachEvent("on"+t,n)})}(baidu._util_.eventBase),void function(e,t){if(e.queue)return;var n=baidu.id,r=e.queue={},i=r.attaCache=baidu.global("eventQueueCache"),s=e.listener;r.get=function(e,t,r,s){var o=n(e),u;return i[o]||(i[o]={}),u=i[o],t?(!u[t]&&r&&this.setupCall(e,t,r,u[t]=[],s),u[t]||[]):u},r.add=function(e,t,n,r,i){this.get(e,t,n,i).push(r)},r.remove=function(e,t,n){var r,i;if(t){var r=this.get(e,t);if(n)for(var s=r.length-1;s>=0;s--)r[s].orig==n&&r.splice(s,1);else r.length=0}else{var i=this.get(e);for(var s in i)i[s].length=0}},r.handlerList=function(e,t){var n=[];for(var r=0,i;i=t[r];r++){if(i.delegate&&baidu.dom(i.delegate,e).size()<1)continue;n.push(i)}return n},r.call=function(e,t,n,i){if(n){if(!n.length)return;var s=[].slice.call(arguments,1),o=[];s.unshift(i=baidu.event(i||t)),i.type=t,i.currentTarget||(i.currentTarget=e),i.target||(i.target=e),n=r.handlerList(e,n);for(var u=0,a,f=n.length;u<f;u++)if(a=n[u])a.pkg.apply(e,s),a.one&&o.unshift(u);if(o.length)for(var u=0,f=o.length;u<f;u++)this.remove(e,t,n[u].fn)}else n=this.get(e,t),this.call(e,t,n,i)},r.setupCall=function(){var e=function(e,t,n,i){s.add(e,n,function(n){r.call(e,t,i,n)})};return function(t,n,r,i,s){if(!s)e(t,n,r,i);else{t=baidu.dom(s,t);for(var o=0,u=t.length;o<u;o++)e(t[o],n,r,i)}}}()}(baidu._util_.eventBase,baidu.event),void function(e,t){if(e.core)return;var n=e.queue,r=e.core={},i=t.special={},s=[].push,o=function(e,t){for(var n=0,r=t.length;n<r;n++)if(t.get(n).contains(e))return t[n]};r.build=function(e,t,n,r,u){var a;return r&&(a=baidu.dom(r,e)),t in i&&i[t].pack&&(n=i[t].pack(n)),function(t){var i=baidu.dom(t.target),f=[t],l;u&&!t.data&&(t.data=u),t.triggerData&&s.apply(f,t.triggerData);if(!a)return t.result=n.apply(e,f);for(var c=0;c<2;c++){if(l=o(t.target,a))return t.result=n.apply(l,f);a=baidu.dom(r,e)}}},r.add=function(e,t,r,s,o,u){var a=this.build(e,t,r,s,o),f,l;l=t,t in i&&(f=i[t].attachElements,l=i[t].bindType||t),n.add(e,t,l,{type:t,pkg:a,orig:r,one:u,delegate:s},f)},r.remove=function(e,t,r,i){n.remove(e,t,r,i)}}(baidu._util_.eventBase,baidu.event),baidu.dom.extend({on:function(e,t,n,r,i){var s=baidu._util_.eventBase.core;return typeof t=="object"&&t?(r=n,n=t,t=null):typeof n=="function"?(r=n,n=null):typeof t=="function"&&(r=t,t=n=null),typeof e=="string"?(e=e.split(/[ ,]+/),this.each(function(){baidu.forEach(e,function(e){s.add(this,e,r,t,n,i)},this)})):typeof e=="object"&&(r&&(r=null),baidu.forEach(e,function(e,r){this.on(r,t,n,e,i)},this)),this}}),baidu.dom.g=function(e){return e?"string"==typeof e||e instanceof String?document.getElementById(e):!e.nodeName||e.nodeType!=1&&e.nodeType!=9?null:e:null},baidu.event.on=baidu.on=function(e,t,n){return typeof e=="string"&&(e=baidu.dom.g(e)),baidu.dom(e).on(t.replace(/^\s*on/,""),n),e},function(){function e(e,n){var r=e.getAttribute(n),i,s=!1;if(r&&(i=r.match(t[0]))){s={};for(var o=0,u;o<i.length;o++)u=i[o].match(t[1]),!isNaN(u[2])&&(u[2]=+u[2]),t[2].test(u[2])&&(u[2]=u[2].replace(t[3],"$2")),t[4].test(u[2])&&(u[2]=t[5].test(u[2])),s[u[1]]=u[2]}return s}function n(t,n){var r=e(t,"tang-event");if(r)for(var i in r){var s=r[i].substr(1);s.indexOf("(")<0&&(s+="()"),baidu.dom(t).on(i,new Function("baiduInstance('"+n+"') && baiduInstance('"+n+"')"+s))}}magic.setup=magic.setup||function(t,r,i){var s=e(t,"tang-param")||{};for(var o in i)s[o]=i[o];var u=new r(s);u.$mappingDom("",t),n(t,u.guid);var a=t.getElementsByTagName("*");for(var o=a.length-1;o>=0;o--)n(a[o],u.guid);return u};var t=[/\b[\w\$\-]+\s*:\s*[^;]+/g,/([\w\$\-]+)\s*:\s*([^;]+)\s*/,/\'|\"/,/^\s*(\'|\")([^\1]*)\1\s*/,/^(true|false)\s*$/i,/\btrue\b/i]}(),baidu.array.extend({indexOf:function(e,t){baidu.check(".+(,number)?","baidu.array.indexOf");var n=this.length;(t|=0)<0&&(t=Math.max(0,n+t));for(;t<n;t++)if(t in this&&this[t]===e)return t;return-1}}),baidu.array.extend({contains:function(e){return!!~this.indexOf(e)}}),baidu.createChain("string",function(e){var t=baidu.type(e),n=new String(~"string|number".indexOf(t)?e:t),r=String.prototype;return baidu.forEach(baidu.string.$String.prototype,function(e,t){r[t]||(n[t]=e)}),n}),baidu.string.extend({trim:function(){var e=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g");return function(){return this.replace(e,"")}}()}),baidu.dom.extend({addClass:function(e){if(!arguments.length)return this;var t=typeof e,n=" ";if(t=="string"){e=baidu.string.trim(e);var r=e.split(" ");baidu.forEach(this,function(e,t){var i=e.className;for(var s=0;s<r.length;s++)~(n+i+n).indexOf(n+r[s]+n)||(i+=" "+r[s]);e.className=i.replace(/^\s+/g,"")})}else t=="function"&&baidu.forEach(this,function(t,n){baidu.dom(t).addClass(e.call(t,n,t.className))});return this}}),baidu.dom.extend({removeClass:function(e){var t=typeof e,n=" ";arguments.length||baidu.forEach(this,function(e){e.className=""});if(t=="string"){e=baidu.string.trim(e);var r=e.split(" ");baidu.forEach(this,function(e){var t=e.className;for(var i=0;i<r.length;i++)while(~(n+t+n).indexOf(n+r[i]+n))t=(n+t+n).replace(n+r[i]+n,n);e.className=baidu.string.trim(t)})}else t=="function"&&baidu.forEach(this,function(t,n,r){baidu.dom(t).removeClass(e.call(t,n,t.className))});return this}}),baidu._util_.contains=document.compareDocumentPosition?function(e,t){return!!(e.compareDocumentPosition(t)&16)}:function(e,t){if(e===t)return!1;if(e.contains&&t.contains)return e.contains(t);while(t=t.parentNode)if(t===e)return!0;return!1},baidu.dom.extend({contains:function(e){var t=this[0];return e=baidu.dom(e)[0],!t||!e?!1:baidu._util_.contains(t,e)}}),baidu.dom._g=function(e){return baidu.type(e)==="string"?document.getElementById(e):e},baidu.dom.contains=function(e,t){var n=baidu.dom._g;return baidu._util_.contains(n(e),n(t))},baidu._util_.access=function(e,t,n,r,i){if(e.size()<=0)return e;switch(baidu.type(t)){case"string":if(n===undefined)return r.call(e,e[0],t);e.each(function(s,o){r.call(e,o,t,baidu.type(n)==="function"?n.call(o,s,r.call(e,o,t)):n,i)});break;case"object":for(var s in t)baidu._util_.access(e,s,t[s],r,n)}return e},baidu._util_.nodeName=function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},baidu._util_.propFixer={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",classname:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable",rboolean:/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i},!document.createElement("form").enctype&&(baidu._util_.propFixer.enctype="encoding"),baidu._util_.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":!1},baidu._util_.prop=function(){var e=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea|)$/i,n=document.createElement("select"),r=n.appendChild(document.createElement("option")),i={tabIndex:{get:function(n){var r=n.getAttributeNode("tabindex");return r&&r.specified?parseInt(r.value,10):e.test(n.nodeName)||t.test(n.nodeName)&&n.href?0:undefined}}};return!r.selected&&(i.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),n=r=null,function(e,t,n){var r=e.nodeType,s,o;if(!e||~"238".indexOf(r))return;if(r!==1||!baidu._util_.isXML(e))t=baidu._util_.propFixer[t]||t,s=i[t]||{};return n!==undefined?s.set&&(o=s.set(e,t,n))!==undefined?o:e[t]=n:s.get&&(o=s.get(e,t))!==null?o:e[t]}}(),baidu._util_.support=baidu._util_.support||function(){var e=document.createElement("div"),t,n,r,i,s;return e.setAttribute("className","t"),e.innerHTML=' <link/><table></table><a href="/a">a</a><input type="checkbox"/>',n=e.getElementsByTagName("A")[0],n.style.cssText="top:1px;float:left;opacity:.5",i=document.createElement("select"),s=i.appendChild(document.createElement("option")),r=e.getElementsByTagName("input")[0],r.checked=!0,t={dom:{div:e,a:n,select:i,opt:s,input:r}},t}(),baidu._util_.support.getSetAttribute=baidu._util_.support.dom.div.className!=="t",baidu._util_.nodeHook=function(){if(baidu._util_.support.getSetAttribute)return;var e={};return e.name=e.id=e.coords=!0,{get:function(t,n){var r=t.getAttributeNode(n);return r&&(e[n]?r.value!=="":r.specified)?r.value:undefined},set:function(e,t,n){var r=e.getAttributeNode(t);return r||(r=document.createAttribute(t),e.setAttributeNode(r)),r.value=n+""}}}(),baidu._util_.removeAttr=function(){var e=baidu._util_.propFixer,t=/\s+/,n=baidu._util_.support.getSetAttribute;return function(r,i){if(!i||r.nodeType!==1)return;var s=i.split(t),o,u;for(var a=0,f;f=s[a];a++)o=e[f]||f,u=e.rboolean.test(f),!u&&baidu._util_.attr(r,f,""),r.removeAttribute(n?f:o),u&&o in r&&(r[o]=!1)}}(),baidu._util_.attr=function(){var e=baidu._util_,t=/^(?:button|input)$/i,n=e.support.dom,r=n.input.value==="t",i=n.a.getAttribute("href")==="/a",s=/top/.test(n.a.getAttribute("style")),o=e.nodeHook,u={className:"class"},a={get:function(t,n){var r=e.prop(t,n),i;return r===!0||typeof r!="boolean"&&(i=t.getAttributeNode(n))&&i.nodeValue!==!1?n.toLowerCase():undefined},set:function(t,n,r){if(r===!1)e.removeAttr(t,n);else{var i=e.propFixer[n]||n;i in t&&(t[i]=!0),t.setAttribute(n,n.toLowerCase())}return n}},f={type:{set:function(n,i,s){if(t.test(n.nodeName)&&n.parentNode)return s;if(!r&&s==="radio"&&e.nodeName(n,"input")){var o=n.value;return n.setAttribute("type",s),o&&(n.value=o),s}}},value:{get:function(t,n){return o&&e.nodeName(t,"button")?o.get(t,n):n in t?t.value:null},set:function(t,n,r){if(o&&e.nodeName(t,"button"))return o.set(t,n,r);t.value=r}}};return e.support.getSetAttribute||(baidu.forEach(["width","height"],function(e){f[e]={set:function(e,t,n){if(n==="")return e.setAttribute(t,"auto"),n}}}),f.contenteditable={get:o.get,set:function(e,t,n){n===""&&(n=!1),o.set(e,t,n)}}),i||baidu.forEach(["href","src","width","height"],function(e){f[e]={get:function(e,t){var n=e.getAttribute(t,2);return n===null?undefined:n}}}),s||(f.style={get:function(e){return e.style.cssText.toLowerCase()||undefined},set:function(e,t,n){return e.style.cssText=n+""}}),function(t,n,r,i){var s=t.nodeType,l=s!==1||!e.isXML(t),c,h;if(!t||~"238".indexOf(s))return;if(i&&baidu.dom.fn[n])return baidu.dom(t)[n](r);l&&(n=u[n]||n.toLowerCase(),c=f[n]||(e.propFixer.rboolean.test(n)?a:o));if(r!==undefined){if(r===null){e.removeAttr(t,n);return}return l&&c&&c.set&&(h=c.set(t,n,r))!==undefined?h:(t.setAttribute(n,r+""),r)}return l&&c&&c.get&&(h=c.get(t,n))!==null?h:(h=t.getAttribute(n),h===null?undefined:h)}}(),baidu.dom.extend({attr:function(e,t){return baidu._util_.access(this,e,t,function(e,t,n,r){return baidu._util_.attr(e,t,n,r)})}}),baidu.dom.extend({getComputedStyle:function(e){if(!this[0].ownerDocument)return;var t=this[0].ownerDocument.defaultView,n=t&&t.getComputedStyle&&t.getComputedStyle(this[0],null),r=n?n.getPropertyValue(e)||n[e]:"";return r||this[0].style[e]}}),baidu.dom.extend({getCurrentStyle:function(){var e=document.documentElement.currentStyle?function(e){return this[0].currentStyle?this[0].currentStyle[e]:this[0].style[e]}:function(e){return this.getComputedStyle(e)};return function(t){return e.call(this,t)}}()}),baidu._util_.getWidthOrHeight=function(){function r(e,t){var n={};for(var r in t)n[r]=e.style[r],e.style[r]=t[r];return n}var e={},t={position:"absolute",visibility:"hidden",display:"block"},n=/^(none|table(?!-c[ea]).+)/;return baidu.forEach(["Width","Height"],function(i){var s={Width:["Right","Left"],Height:["Top","Bottom"]}[i];e["get"+i]=function(e,o){var u=baidu.dom(e),a=e.offsetWidth===0&&n.test(u.getCurrentStyle("display"))&&r(e,t),f=e["offset"+i]||parseInt(u.getCurrentStyle(i.toLowerCase()))||0,l="padding|border";return o&&baidu.forEach(o.split("|"),function(e){~l.indexOf(e)?l=l.replace(new RegExp("\\|?"+e+"\\|?"),""):(f+=parseFloat(u.getCurrentStyle(e+s[0]))||0,f+=parseFloat(u.getCurrentStyle(e+s[1]))||0)}),l&&baidu.forEach(l.split("|"),function(e){f-=parseFloat(u.getCurrentStyle(e+s[0]+(e==="border"?"Width":"")))||0,f-=parseFloat(u.getCurrentStyle(e+s[1]+(e==="border"?"Width":"")))||0}),a&&r(e,a),f}}),function(t,n,r){return e[n==="width"?"getWidth":"getHeight"](t,r)}}(),baidu._util_.getWindowOrDocumentWidthOrHeight=baidu._util_.getWindowOrDocumentWidthOrHeight||function(){var e={window:{},document:{}};return baidu.forEach(["Width","Height"],function(t){var n="client"+t,r="offset"+t,i="scroll"+t;e.window["get"+t]=function(e){var t=e.document,r=t.documentElement[n];return baidu.browser.isStrict&&r||t.body&&t.body[n]||r},e.document["get"+t]=function(e){var t=e.documentElement;return t[n]>=t[i]?t[n]:Math.max(e.body[i],t[i],e.body[r],t[r])}}),function(t,n,r){return e[n][r==="width"?"getWidth":"getHeight"](t)}}(),baidu.dom.extend({width:function(e){return baidu._util_.access(this,"width",e,function(e,t,n){var r=n!==undefined,i=r&&parseFloat(n),s=e!=null&&e==e.window?"window":e.nodeType===9?"document":!1;if(r&&i<0||isNaN(i))return;return r&&/^(?:\d*\.)?\d+$/.test(n+="")&&(n+="px"),s?baidu._util_.getWindowOrDocumentWidthOrHeight(e,s,t):r?e.style.width=n:baidu._util_.getWidthOrHeight(e,t)})}}),baidu.base=baidu.base||{blank:function(){}},baidu.base.Class=function(){var e=(baidu._global_=window[baidu.guid])._instances;return e||(e=baidu._global_._instances={}),function(){this.guid=baidu.id(),this._decontrol_||(e[this.guid]=this)}}(),baidu.extend(baidu.base.Class.prototype,{toString:baidu.base.Class.prototype.toString=function(){return"[object "+(this._type_||"Object")+"]"},dispose:function(){delete baidu._global_._instances[this.guid];if(this._listeners_)for(var e in this._listeners_)this._listeners_[e].length=0,delete this._listeners_[e];for(var t in this)baidu.isFunction(this[t])?this[t]=baidu.base.blank:delete this[t];this.disposed=!0},fire:function(e,t){baidu.isString(e)&&(e=new baidu.base.Event(e));var n,r,i,s,o=this._listeners_,u=e.type,a=[e].concat(Array.prototype.slice.call(arguments,1));!o&&(o=this._listeners_={}),baidu.extend(e,t||{}),e.target=e.target||this,e.currentTarget=this,u.indexOf("on")&&(u="on"+u),baidu.isFunction(this[u])&&this[u].apply(this,a),(n=this._options)&&baidu.isFunction(n[u])&&n[u].apply(this,a);if(baidu.isArray(i=o[u]))for(n=i.length-1;n>-1;n--)s=i[n],s&&s.handler.apply(this,a),s&&s.once&&i.splice(n,1);return e.returnValue},on:function(e,t,n){if(!baidu.isFunction(t))return this;var r,i=this._listeners_;return!i&&(i=this._listeners_={}),e.indexOf("on")&&(e="on"+e),!baidu.isArray(r=i[e])&&(r=i[e]=[]),i[e].unshift({handler:t,once:!!n}),this},once:function(e,t){return this.on(e,t,!0)},one:function(e,t){return this.on(e,t,!0)},off:function(e,t){var n,r,i=this._listeners_;if(!i)return this;if(typeof e=="undefined"){for(n in i)delete i[n];return this}e.indexOf("on")&&(e="on"+e);if(typeof t=="undefined")delete i[e];else if(r=i[e])for(n=r.length-1;n>=0;n--)r[n].handler===t&&r.splice(n,1);return this}}),baidu.base.Class.prototype.addEventListener=baidu.base.Class.prototype.on,baidu.base.Class.prototype.removeEventListener=baidu.base.Class.prototype.un=baidu.base.Class.prototype.off,baidu.base.Class.prototype.dispatchEvent=baidu.base.Class.prototype.fire,window.baiduInstance=function(e){return window[baidu.guid]._instances[e]},baidu.base.Event=function(e,t){this.type=e,this.returnValue=!0,this.target=t||null,this.currentTarget=null,this.preventDefault=function(){this.returnValue=!1}},baidu.lang.Class=baidu.base.Class,baidu.createClass=function(e,t,n){e=baidu.isFunction(e)?e:function(){},n=typeof t=="object"?t:n||{};var r=function(){var t=this;n.decontrolled&&(t._decontrol_=!0),r.superClass.apply(t,arguments);for(var i in r.options)t[i]=r.options[i];e.apply(t,arguments);for(var i=0,s=r._reg_;s&&i<s.length;i++)s[i].apply(t,arguments)};return baidu.extend(r,{superClass:n.superClass||baidu.base.Class,inherits:function(t){if(typeof t!="function")return r;var n=function(){};n.prototype=(r.superClass=t).prototype;var i=r.prototype=new n;return baidu.extend(r.prototype,e.prototype),i.constructor=e,r},register:function(e,t){return(r._reg_||(r._reg_=[])).push(e),t&&baidu.extend(r.prototype,t),r},extend:function(e){return baidu.extend(r.prototype,e),r}}),t=baidu.isString(t)?t:n.className||n.type,baidu.isString(t)&&(e.prototype._type_=t),baidu.isFunction(r.superClass)&&r.inherits(r.superClass),r},baidu.lang.createClass=baidu.createClass,baidu.object=baidu.object||{},baidu.object.extend=baidu.extend,baidu.string.extend({format:function(e){var t=this.valueOf(),n=Array.prototype.slice.call(arguments,0),r=Object.prototype.toString;return n.length?(n=n.length==1?e!==null&&/\[object Array\]|\[object Object\]/.test(r.call(e))?e:n:n,t.replace(/#\{(.+?)\}/g,function(e,t){var i=n[t];return"[object Function]"==r.call(i)&&(i=i(t)),"undefined"==typeof i?"":i})):t}}),baidu.string.extend({encodeHTML:function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}}),baidu.lang.Event=baidu.base.Event,baidu.base.inherits=function(e,t,n){var r,i,s=e.prototype,o=new Function;o.prototype=t.prototype,i=e.prototype=new o;for(r in s)i[r]=s[r];return e.prototype.constructor=e,e.superClass=t.prototype,typeof n=="string"&&(i._type_=n),e.extend=function(t){for(var n in t)i[n]=t[n];return e},e},baidu.lang.inherits=baidu.base.inherits,baidu.lang.isString=baidu.isString,magic.Base=function(){baidu.lang.Class.call(this),this._ids={},this._eid=this.guid+"__"},baidu.lang.inherits(magic.Base,baidu.lang.Class,"magic.Base").extend({getElement:function(e){return document.getElementById(this.$getId(e))},getElements:function(){var e={},t=this._ids;for(var n in t)e[n]=this.getElement(n);return e},$getId:function(e){return e=baidu.lang.isString(e)?e:"",this._ids[e]||(this._ids[e]=this._eid+e)},$mappingDom:function(e,t){return baidu.lang.isString(t)?this._ids[e]=t:t&&t.nodeType&&(t.id?this._ids[e]=t.id:t.id=this.$getId(e)),this},$dispose:function(){this.fire("ondispose")&&baidu.lang.Class.prototype.dispose.call(this)}}),magic.control=magic.control||{},baidu.each=function(e,t,n){var r,i,s,o;if(typeof t=="function"&&e){i=typeof e.length=="number"?e.length:e.byteLength;if(typeof i=="number"){if(Object.prototype.toString.call(e)==="[object Function]")return e;for(r=0;r<i;r++){s=e[r],s===undefined&&(s=e.charAt&&e.charAt(r)),o=t.call(n||s,r,s,e);if(o===!1||o=="break")break}}else if(typeof e=="number")for(r=0;r<e;r++){o=t.call(n||r,r,r,r);if(o===!1||o=="break")break}else if(typeof e=="object")for(r in e)if(e.hasOwnProperty(r)){o=t.call(n||e[r],r,e[r],e);if(o===!1||o=="break")break}}return e},baidu._util_.setPositiveNumber=function(){var e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,t=new RegExp("^("+e+")(.*)$","i");return function(e,n,r){var i=t.exec(n);return i?Math.max(0,i[1]-(r||0))+(i[2]||"px"):n}}(),baidu._util_.style=baidu.extend({set:function(e,t,n){e.style[t]=n}},document.documentElement.currentStyle?{get:function(e,t){var n=baidu.dom(e).getCurrentStyle(t),r;return/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i.test(n)&&(r=e.style.left,e.style.left=t==="fontSize"?"1em":n,n=e.style.pixelLeft+"px",e.style.left=r),n}}:{get:function(e,t){return baidu.dom(e).getCurrentStyle(t)}}),baidu._util_.cssHooks=function(){function s(e,n,r){baidu.type(r)==="string"&&(r=baidu._util_.setPositiveNumber(e,r)),t.set(e,n,r)}var e=/alpha\s*\(\s*opacity\s*=\s*([^)]*)/i,t=baidu._util_.style,n=baidu._util_.support.dom.a,r={fontWeight:{normal:400,bold:700,bolder:700,lighter:100}},i={opacity:{},width:{},height:{},fontWeight:{get:function(e,n){var i=t.get(e,n);return r.fontWeight[i]||i}}};return baidu.extend(i.opacity,/^0.5/.test(n.style.opacity)?{get:function(e,t){var n=baidu.dom(e).getCurrentStyle(t);return n===""?"1":n}}:{get:function(t){return e.test((t.currentStyle||t.style).filter||"")?parseFloat(RegExp.$1)/100+"":"1"},set:function(t,n,r){var i=(t.currentStyle||t.style).filter||"",s=r*100;t.style.zoom=1,t.style.filter=e.test(i)?i.replace(e,"Alpha(opacity="+s):i+" progid:dximagetransform.microsoft.Alpha(opacity="+s+")"}}),baidu.forEach(["width","height"],function(e){i[e]={get:function(t){return baidu._util_.getWidthOrHeight(t,e)+"px"},set:s}}),baidu.each({padding:"",border:"Width"},function(e,t){i[e+t]={set:s};var n=["Top","Right","Bottom","Left"],r=0;for(;r<4;r++)i[e+n[r]+t]={set:s}}),i}(),baidu._util_.cssNumber={columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},baidu.string.extend({toCamelCase:function(){var e=this.valueOf();return e.indexOf("-")<0&&e.indexOf("_")<0?e:e.replace(/[-_][^-_]/g,function(e){return e.charAt(1).toUpperCase()})}}),baidu.dom.styleFixer=function(){var e=baidu._util_.style,t=baidu._util_.cssHooks,n=baidu._util_.cssNumber,r={"float":baidu._util_.support.dom.a.style.cssFloat?"cssFloat":"styleFloat"};return function(i,s,o){var u=baidu.string.toCamelCase(s),a=o===undefined?"get":"set",f,l;return u=r[u]||u,f=baidu.type(o)==="number"&&!n[u]?o+"px":o,l=t.hasOwnProperty(u)&&t[u][a]||e[a],l(i,u,f)}}(),baidu.dom.extend({css:function(e,t){return baidu.check("^(?:(?:string(?:,(?:number|string|function))?)|object)$","baidu.dom.css"),baidu._util_.access(this,e,t,function(e,t,n){var r=baidu.dom.styleFixer;return r?r(e,t,n):n===undefined?this.getCurrentStyle(t):e.style[t]=n})}}),baidu.dom.extend({height:function(e){return baidu._util_.access(this,"height",e,function(e,t,n){var r=n!==undefined,i=r&&parseFloat(n),s=e!=null&&e==e.window?"window":e.nodeType===9?"document":!1;if(r&&i<0||isNaN(i))return;return r&&/^(?:\d*\.)?\d+$/.test(n+="")&&(n+="px"),s?baidu._util_.getWindowOrDocumentWidthOrHeight(e,s,t):r?e.style.height=n:baidu._util_.getWidthOrHeight(e,t)})}}),magic.control.Layer=baidu.lang.createClass(function(e){this.width="auto",this.height="auto",baidu.object.extend(this,e||{})},{type:"magic.control.Layer",superClass:magic.Base}).extend({show:function(){this.fire("onbeforeshow")&&(this.getElement().style.display="",this.fire("onshow"))},hide:function(){this.fire("onbeforehide")&&(this.getElement().style.display="none",this.fire("onhide"))},setWidth:function(e){this.width=e,baidu(this.getElement()).width(e)},setHeight:function(e){this.height=e,baidu.dom(this.getElement()).height(e)},setSize:function(e){this.setWidth(e.width||e[0]),this.setHeight(e.height||e[1])}}),baidu.dom.extend({off:function(e,t,n){var r=baidu._util_.eventBase.core,i=this;return e?typeof e=="string"?(typeof t=="function"&&(n=t,t=null),e=e.split(/[ ,]/),baidu.forEach(this,function(i){baidu.forEach(e,function(e){r.remove(i,e,n,t)})})):typeof e=="object"&&baidu.forEach(e,function(e,n){i.off(n,t,e)}):baidu.forEach(this,function(e){r.remove(e)}),this}}),baidu.event.un=baidu.un=function(e,t,n){return typeof e=="string"&&(e=baidu.dom.g(e)),baidu.dom(e).off(t.replace(/^\s*on/,""),n),e},baidu.dom.extend({getDocument:function(){if(this.size()<=0)return undefined;var e=this[0];return e.nodeType==9?e:e.ownerDocument||e.document}}),baidu.dom.extend({getWindow:function(){var e=this.getDocument();return this.size()<=0?undefined:e.parentWindow||e
.defaultView}}),baidu.dom.extend({pushStack:function(e){var t=baidu.dom();return baidu.merge(t,e),t.prevObject=this,t.context=this.context,t}}),baidu.dom.extend({map:function(e){baidu.check("function","baidu.dom.map");var t=[],n=0;return baidu.forEach(this,function(r,s){t[n++]=e.call(r,s,r,r)}),this.pushStack(t)}}),baidu.dom.extend({offsetParent:function(){return this.map(function(){var e=this.offsetParent||document.body,t=/^(?:body|html)$/i;while(e&&baidu.dom(e).getCurrentStyle("position")==="static"&&!t.test(e.nodeName))e=e.offsetParent;return e})}}),baidu.dom.extend({position:function(){if(this.size()<=0)return 0;var e=/^(?:body|html)$/i,t=this.offset(),n=this.offsetParent(),r=e.test(n[0].nodeName)?{left:0,top:0}:n.offset();return t.left-=parseFloat(this.getCurrentStyle("marginLeft"))||0,t.top-=parseFloat(this.getCurrentStyle("marginTop"))||0,r.left+=parseFloat(n.getCurrentStyle("borderLeftWidth"))||0,r.top+=parseFloat(n.getCurrentStyle("borderTopWidth"))||0,{left:t.left-r.left,top:t.top-r.top}}}),baidu.dom.extend({offset:function(){function e(e,t,n){var r=r=baidu.dom(e),i=r.getCurrentStyle("position");i==="static"&&(e.style.position="relative");var s=r.offset(),o=r.getCurrentStyle("left"),u=r.getCurrentStyle("top"),a=~"absolute|fixed".indexOf(i)&&~(""+o+u).indexOf("auto"),f=a&&r.position();o=f&&f.left||parseFloat(o)||0,u=f&&f.top||parseFloat(u)||0,baidu.type("options")==="function"&&(t=t.call(e,n,s)),t.left!=undefined&&(e.style.left=t.left-s.left+o+"px"),t.top!=undefined&&(e.style.top=t.top-s.top+u+"px")}return function(t){if(t){baidu.check("^(?:object|function)$","baidu.dom.offset");for(var n=0,r;r=this[n];n++)e(r,t,n);return this}var i=this[0],s=this.getDocument(),o={left:0,top:0},u,a;if(!s)return;return a=s.documentElement,baidu._util_.contains(a,i)?(typeof i.getBoundingClientRect!="undefined"&&(o=i.getBoundingClientRect()),u=this.getWindow(),{left:o.left+(u.pageXOffset||a.scrollLeft)-(a.clientLeft||0),top:o.top+(u.pageYOffset||a.scrollTop)-(a.clientTop||0)}):o}}()}),baidu.global.set=function(e,t,n){return baidu.global(e,t,!n)},baidu.global.get=function(e){return baidu.global(e)},baidu.page=baidu.page||{},baidu.page.getViewHeight=function(){var e=document,t=baidu.browser.ie||1,n=e.compatMode==="BackCompat"&&t<9?e.body:e.documentElement;return n.clientHeight},baidu.page.getScrollTop=function(){var e=document;return window.pageYOffset||e.documentElement.scrollTop||e.body.scrollTop},magic.control.Popup=baidu.lang.createClass(function(e){var t=this;t.visible=!1,t.autoHide=!0,t.hideOnEscape=!0,t.disposeOnHide=!1,t.smartPosition=!1,t.offsetX=0,t.offsetY=0,baidu.object.extend(this,e||{}),t._parent=null,t._host=null,t._init_control_popup()},{superClass:magic.control.Layer,type:"magic.control.Popup"}).extend({setContent:function(e){this.getElement("content").innerHTML=e},attach:function(e,t){baidu.dom(e).size()&&(baidu.object.extend(this,t||{}),this._host=baidu(e)[0],this.show())},reposition:function(e){var t=this;!e&&t._host&&(e=baidu.dom(t._host).offset());if(e){t.top=e.top+t.offsetY+t._host.offsetHeight,t.left=e.left+t.offsetX,t._resupinate=!1;if(t.smartPosition){var n=t.getElement().offsetHeight,r=baidu.page.getViewHeight(),i=baidu.page.getScrollTop(),s=e.top-t.offsetY-n;t.top+n>i+r&&s>i&&s<i+r&&(t.top=e.top-t.offsetY-n,t._resupinate=!0)}}t.fire("reposition"),t.setPosition([t.left,t.top])},setPosition:function(e){this.setTop(e.top||e[1]),this.setLeft(e.left||e[0])},setTop:function(e){baidu.dom(this.getElement()).css("top",(this.top=e)+"px")},setLeft:function(e){baidu.dom(this.getElement()).css("left",(this.left=e)+"px")},_init_control_popup:function(){function t(){e.reposition()}function n(t){t.keyCode==27&&e.hideOnEscape&&e.autoHide&&e.hide()}function r(){var t=e;do s[t.guid]=!0;while(t=t._parent)}function o(s){e.visible=!1,delete i[e.guid],e._host&&baidu.dom(e._host).off("click",r),baidu.dom(e.getElement()).off("click",r),baidu.dom(window).off("resize",t),baidu.dom(document).off("keyup",n),s&&e.$dispose()}var e=this,i=baidu.global.get("popupList"),s=baidu.global.get("popupProtect");e.on("show",function(){e.reposition(),setTimeout(function(){e.guid&&(i[e.guid]=!0)},1),e._host&&baidu.dom(e._host).on("click",r),baidu.dom(e.getElement()).on("click",r),baidu.dom(window).on("resize",t),baidu.dom(document).on("keyup",n),e.width!="auto"&&e.setWidth(e.width),e.height!="auto"&&e.setHeight(e.height),e.visible=!0}),e.on("hide",function(){o(e.disposeOnHide)}),e.on("dispose",function(){o(!1)})}}),function(){function n(){for(var n in e){var r=baiduInstance(n);!t[n]&&r.autoHide&&r.hide()}for(var n in t)delete t[n]}var e=baidu.global.set("popupList",{},!0),t=baidu.global.set("popupProtect",{},!0);baidu.dom(window).on("resize",n),baidu.dom(window).on("scroll",n),baidu.dom(document).on("click",n)}(),baidu.dom.createElements=function(){function r(e,t){var n=e.getElementsByTagName("SCRIPT"),r,i,s;for(r=n.length-1;r>=0;r--)s=n[r],i=t.createElement("SCRIPT"),s.id&&(i.id=s.id),s.src&&(i.src=s.src),s.type&&(i.type=s.type),i[s.text?"text":"textContent"]=s.text||s.textContent,s.parentNode.replaceChild(i,s)}var e=/<(\w+)/i,t=/<|&#?\w+;/,n={area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],option:[1,"<select multiple='multiple'>","</select>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],_default:[0,"",""]};return n.optgroup=n.option,n.tbody=n.tfoot=n.colgroup=n.caption=n.thead,n.th=n.td,function(i,s){baidu.isNumber(i)&&(i=i.toString()),s=s||document;var o,u,a,f=i,l=f.length,c=s.createElement("div"),h=s.createDocumentFragment(),p=[];if(baidu.isString(f))if(!t.test(f))p.push(s.createTextNode(f));else{o=n[f.match(e)[1].toLowerCase()]||n._default,c.innerHTML="<i>mz</i>"+o[1]+f+o[2],c.removeChild(c.firstChild),r(c,s),u=o[0],a=c;while(u--)a=a.firstChild;baidu.merge(p,a.childNodes),baidu.forEach(p,function(e){h.appendChild(e)}),c=a=null}return c=null,p}}(),baidu._util_.cleanData=function(e){var t;for(var n=0,r;r=e[n];n++){t=baidu.id(r,"get");if(!t)continue;baidu._util_.eventBase.queue.remove(r),baidu.id(r,"remove")}},baidu.dom.extend({empty:function(){for(var e=0,t;t=this[e];e++){t.nodeType===1&&baidu._util_.cleanData(t.getElementsByTagName("*"));while(t.firstChild)t.removeChild(t.firstChild)}return this}}),baidu.dom.extend({append:function(){return baidu.check("^(?:string|function|HTMLElement|\\$DOM)(?:,(?:string|array|HTMLElement|\\$DOM))*$","baidu.dom.append"),baidu._util_.smartInsert(this,arguments,function(e){this.nodeType===1&&this.appendChild(e)}),this}}),baidu.dom.extend({html:function(e){var t=baidu.dom,n=baidu._util_,r=this,i=!1,s=!!n.support.dom.div.getElementsByTagName("link").length,o=n.support.dom.div.firstChild.nodeType===3,u;if(!this.size())switch(typeof e){case"undefined":return undefined;default:return r}var a="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",f=/<(?:script|style|link)/i,l=new RegExp("<(?:"+a+")[\\s/>]","i"),c=/^\s+/,h=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,p=/<([\w:]+)/,d={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};return d.optgroup=d.option,d.tbody=d.tfoot=d.colgroup=d.caption=d.thead,d.th=d.td,s||(d._default=[1,"X<div>","</div>"]),baidu.forEach(r,function(n,a){if(u)return;var v=t(n);switch(typeof e){case"undefined":u=n.nodeType===1?n.innerHTML:undefined;return;case"number":e=String(e);case"string":i=!0;if(!f.test(e)&&(s||!l.test(e))&&(o||!c.test(e))&&!d[(p.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(h,"<$1></$2>");try{n.nodeType===1&&(v.empty(),n.innerHTML=e),n=0}catch(m){}}n&&r.empty().append(e);break;case"function":i=!0,v.html(e.call(n,a,v.html()))}}),i?r:u}}),baidu._util_.smartInsert=function(e,t,n){if(t.length<=0||e.size()<=0)return;if(baidu.type(t[0])==="function"){var r=t[0],i;return baidu.forEach(e,function(e,s){i=baidu.dom(e),t[0]=r.call(e,s,i.html()),baidu._util_.smartInsert(i,t,n)})}var s=e.getDocument()||document,o=s.createDocumentFragment(),u=e.length-1,a;for(var f=0,l;l=t[f];f++)l.nodeType?o.appendChild(l):baidu.forEach(~"string|number".indexOf(baidu.type(l))?baidu.dom.createElements(l,s):l,function(e){o.appendChild(e)});if(!(a=o.firstChild))return;baidu.forEach(e,function(e,t){n.call(e.nodeName.toLowerCase()==="table"&&a.nodeName.toLowerCase()==="tr"?e.tBodies[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e,t<u?o.cloneNode(!0):o)})},baidu.dom.extend({prepend:function(){return baidu.check("^(?:string|function|HTMLElement|\\$DOM)(?:,(?:string|array|HTMLElement|\\$DOM))*$","baidu.dom.prepend"),baidu._util_.smartInsert(this,arguments,function(e){this.nodeType===1&&this.insertBefore(e,this.firstChild)}),this}}),baidu.global.getZIndex=function(e,t){var n=baidu.global.get("zIndex");return e&&(n[e]=n[e]+(t||1)),n[e]},baidu.global.set("zIndex",{popup:5e4,dialog:1e3},!0),baidu.dom.extend({hasClass:function(e){if(arguments.length<=0||typeof e=="function")return this;if(this.size()<=0)return!1;e=e.replace(/^\s+/g,"").replace(/\s+$/g,"").replace(/\s+/g," ");var t=e.split(" "),n;return baidu.forEach(this,function(e){var r=e.className;for(var i=0;i<t.length;i++)if(!~(" "+r+" ").indexOf(" "+t[i]+" ")){n=!1;return}if(n!==!1){n=!0;return}}),n}}),magic.Background=baidu.lang.createClass(function(e){var t=e||{},n=this;n.coverable=t.coverable||!1,n.styleBox=t.styleBox,n.tagName="div";var r="filter:progid:DXImageTransform.Microsoft.Alpha(opacity:0);position:absolute;z-index:-1;top:0;left:0;width:100%;height:100%;";n._coverDom="<div style='"+r+"opacity:0;background-color:#FFFFFF'></div>";var i=baidu.browser;i.ie<7&&(n._coverDom="<iframe frameborder='0' style='"+r+"' src='about:blank'></iframe>"),i.ie&&(!i.isStrict||i.ie<8)&&(n.size=[0,0],n.timer=setInterval(function(){n._forIE()},80)),this._innerHTML="<div class='tang-background-inner' style='width:100%;height:100%;' id='"+this.$getId("inner")+"'></div>"},{type:"magic.Background",superClass:magic.Base}).extend({render:function(e){var t=baidu.dom(e).get(0);t!=document.body&&baidu.dom(t).css("position")=="static"&&(t.style.position="relative"),baidu.dom(t).prepend(this.toHTMLString())},$dispose:function(){var e=this.getElement();e.parentNode.removeChild(e),clearInterval(this.timer)},toHTMLString:function(e){return["<",e||this.tagName," class='tang-background",baidu.browser.ie<7?" ie6__":"","' id='",this.$getId(),"' style='position:absolute; top:0px; left:0px;",this.timer?"width:10px;height:10px;":"width:100%;height:100%;","z-index:-9; -webkit-user-select:none; -moz-user-select:none;' ","onselectstart='return false'>",this._innerHTML,this.coverable?this._coverDom||"":"","</",e||this.tagName,">"].join("")},setContent:function(e){this.getElement("inner").innerHTML=e},_forIE:function(){if(this.guid&&this.layer||(this.layer=this.getElement())&&this.layer.offsetHeight){var e=this.layer,t=this.container||e.parentNode;if(t&&t.style){var n=t.style,r=parseInt(n.borderTopWidth)||0,i=parseInt(n.borderRightWidth)||0,s=parseInt(n.borderBottomWidth)||0,o=parseInt(n.borderLeftWidth)||0,u=t.offsetWidth-i-o,a=t.offsetHeight-r-s;if(this.size[0]!=u||this.size[1]!=a)e.style.width=(this.size[0]=u)+"px",e.style.height=(this.size[1]=a)+"px";if(this.styleBox&&this.table||(this.table=this.getElement("table"))){var f,l,c;f=f||parseInt(baidu.dom(this.table.rows[0]).getCurrentStyle("height")),c=c||parseInt(baidu.dom(this.table.rows[2]).getCurrentStyle("height")),this.table.rows[0].style.height=f+"px",this.table.rows[2].style.height=c+"px",this.table.rows[1].style.height=this.layer.offsetHeight-f-c+"px"}}}}}),function(){magic.Popup=function(t){var n=this;magic.control.Popup.call(n,t),n.content="",n.className="",n.styleBox=!1,baidu.object.extend(this,t||{});var r=e.produce();n.$mappingDom("",r.getElement()),n.$mappingDom("content",r.getElement("content")),r.getElement().style.zIndex=baidu.global.getZIndex("popup"),n.setContent(n.content),n.className&&baidu.dom(r.getElement()).addClass(n.className),n.on("dispose",function(){n.className&&baidu.dom(r.getElement()).removeClass(n.className),n.setContent(""),r.busy=!1})},baidu.lang.inherits(magic.Popup,magic.control.Popup,"magic.Popup");var e={list:[],produce:function(){for(var e=0,t=this.list.length;e<t;e++)if(!this.list[e].busy)return this.list[e].busy=!0,this.list[e];var n=new magic.Base;return baidu.dom(document.body).prepend(["<div class='tang-popup' id='",n.$getId(),"' ","style='position:absolute; display:none;'>",(n.background=new magic.Background({coverable:!0})).toHTMLString(),"<div class='tang-foreground' id='",n.$getId("content"),"'></div>","</div>"].join("")),n.busy=!0,this.list.push(n),n}}}(),magic.control.Suggestion=baidu.lang.createClass(function(e){var t=this;baidu.object.extend(this,e||{}),t.dataCache={},t.enableIndexs=[],t.selectedIndex=-1,t.currentQuery="",t.oldInputValue="",t.upDownArrowTimer=null,t.on("onload",function(){function r(){n=setInterval(function(){var n=e.value;!n&&t.isShowing()?t._hide():n!=t.oldInputValue&&(n&&t.fire("onneeddata",n),t.oldInputValue=n)},100)}var e=t.getElement("input"),n=null;baidu.dom(t.getElement("input")).attr("autocomplete","off"),t.oldInputValue=t.getElement("input").value,r();var i=function(){return t._keydownHandler()}(),s=function(e){n&&(clearInterval(n),r()),t.upDownArrowTimer&&(clearTimeout(t.upDownArrowTimer),t.upDownArrowTimer=null)};baidu.dom(e).on("keydown",i),baidu.dom(e).on("keyup",s),t.on("onmousedownitem",function(){clearInterval(n),setTimeout(function(){r()},500)}),t.on("ondispose",function(){baidu.dom(e).off("keydown",i),baidu.dom(e).off("keyup",s),clearInterval(n)})}),t.on("onrender",function(){var e=t.getElement("input"),n=t.getElement("suggestion"),r=function(){t.hide()},i=function(e){var e=e||window.event,r=e.target||e.srcElement;if(!t.suggestion)return;if(r==n||baidu.dom.contains(n,r)||r==t.getElement("input"))return;t.hide()};baidu.dom(window).on("blur",r),baidu.dom(document).on("click",i),t.on("ondispose",function(){baidu.dom(window).off("blur",r),baidu.dom(document).off("click",i)})}),t.on("onneeddata",function(e,n){var r=t.dataCache;t.currentQuery=n,typeof r[n]=="undefined"?t.getData(n):(t.currentData=r[n],t.currentData.length>0?t.show():t.hide())}),t.on("beforeshow",function(){var e=t.currentData,n=0,r=e.length;t.enableIndexs=[];for(;n<r;n++)(typeof e[n]["disable"]=="undefined"||e[n]["disable"]==0)&&t.enableIndexs.push(n)})},{type:"magic.control.Suggestion",superClass:magic.Base}).extend({tpl:{fix:"<div id='#{0}' class='#{1}'>#{2}</div>",body:'<table cellspacing="0" cellpadding="2" class="tang-suggestion-table"><tbody>#{0}</tbody></table>',item:'<tr><td id="#{0}" onmouseover="#{2}" onmouseout="#{3}" onmousedown="#{4}" onclick="#{5}" class="#{6}">#{1}</td></tr>'},render:function(){var e=this,t=new magic.Popup({autoHide:!1,autoTurn:!1,disposeOnHide:!1}),n=t.getElement();return baidu.dom(n).addClass("tang-suggestion-popup"),e.$mappingDom("suggestion",n),e.suggestion=t,e.fire("onrender"),n},isShowing:function(){var e=this,t=e.getElement("suggestion");return t&&baidu.dom(t).css("display")!="none"},show:function(){var e=this,t=e.getElement("suggestion")||e.render(),n=e.getElement("input"),r,i;e.fire("beforeshow"),e.suggestion.setContent(e._getSuggestionString()),e.suggestion.attach(n,{offsetX:e.offset&&e.offset.offsetX||0,offsetY:e.offset&&e.offset.offsetY||-1}),baidu.dom(t).css("display","block"),e.offset&&e.offset.width?(i=e.offset.width,baidu.dom("#"+e.suggestion.$getId("content")).css("width",parseInt(i)-2+"px")):(i=n.offsetWidth,r=t.getElementsByTagName("table")[0],baidu.dom(r).css("width",parseInt(i)-2+"px"),baidu.dom("#"+e.suggestion.$getId("content")).css("width",baidu(r).width()+"px")),e.selectedIndex=-1,e.fire("onshow")},hide:function(){var e=this,t=e.getElement("suggestion");if(!t||!e.isShowing())return;if(e.selectedIndex>=0&&e.holdHighLight){var n=e.currentData,r=e.enableIndexs[e.selectedIndex];n[r]&&(typeof n[r].disable=="undefined"||n[r].disable==0)&&e.$pick(r)}else e.oldInputValue=e.getElement("input").value;e._hide()},_hide:function(){var e=this,t=e.getElement("suggestion");baidu.dom(t).css("display","none"),e.selectedIndex=-1,e.fire("onhide")},_getSuggestionString:function(){function u(t){return baidu.string.format(e.tpl.fix,e.$getId(t),e._getClass(t),e[t+"HTML"])}var e=this,t="",n=[],r=e.currentData,i=r.length,s=0,o;e.prependHTML&&(t+=u("prepend"));for(;s<i;s++)o="baiduInstance('"+e.guid+"')",n.push(baidu.string.format(e.tpl.item,e.$getId("item"+s),r[s].content,o+"._mouseOver(event, "+s+")",o+"._mouseOut(event, "+s+")",o+"._mouseDown(event, "+s+")",o+"._mouseClick(event, "+s+")",typeof r[s]["disable"]=="undefined"||r[s]["disable"]==0?"":"tang-suggestion-disable"));return t+=baidu.string.format(e.tpl.body,n.join("")),e.appendHTML&&(t+=u("append")),t},getInputValue:function(){return this.getElement("input").value},getDataByIndex:function(e){return this.currentData[e]},_isEnable:function(e){var t=this;return baidu.array(t.enableIndexs).contains(e)},_getItemDom:function(e){return baidu.dom("#"+this.$getId("item"+e)).get(0)},_getClass:function(e){return"tang-suggestion-"+e},_focus:function(e){var t=this.enableIndexs;this.$pick(t[e]),this.$highlight(t[e])},$highlight:function(e){var t=this,n=t.enableIndexs,r=null;if(!t._isEnable(e))return;t.selectedIndex>=0&&t.$clearHighlight(),r=t._getItemDom(e),baidu.dom(r).addClass("tang-suggestion-current"),t.selectedIndex=baidu.array(n).indexOf(e),t.fire("onhighlight",{index:e,value:t.getDataByIndex(e).value})},$clearHighlight:function(){var e=this,t=e.selectedIndex,n=null,r=0;r=e.enableIndexs[t],t>=0&&(n=e._getItemDom(r),baidu.dom(n).removeClass(e._getClass("current")),e.selectedIndex=-1,e.fire("onclearhighlight",{index:r,value:e.getDataByIndex(r).value}))},$pick:function(e){var t=this,n=t.currentData,r=n[e];t.fire("onbeforepick",{index:e,value:r.value})&&(t.getElement("input").value=r.value,t.oldInputValue=r.value,t.fire("onpick",{index:e,value:r.value}))},$confirm:function(e){var t=this;if(!t._isEnable(e))return;t.$pick(e),t.fire("onconfirm",{index:e,value:t.getDataByIndex(e).value}),t._hide()},_wrapData:function(e){var t=this,n=[],r=0,i=e.length;for(;r<i;r++)typeof e[r].value!="undefined"?n.push(e[r]):n.push({value:e[r],content:baidu.string.encodeHTML(e[r])});return n},getData:function(e){},receiveData:function(e,t){var n=this,r=n.$cacheData(e,t);n.selectedIndex=-1,e==n.getInputValue()&&(n.currentData=r,t.length>0?n.show():n.hide())},$cacheData:function(e,t){var n=this,r=n._wrapData(t);return n.dataCache[e]=r,r},_mouseOver:function(e,t){var n=this;e=baidu.event(e),e.stopPropagation(),n._isEnable(t)&&(n.$highlight(t),n.selectedIndex=baidu.array(n.enableIndexs).indexOf(t)),n.fire("onmouseoveritem",{index:t,value:n.getDataByIndex(t).value})},_mouseOut:function(e,t){var n=this;e=baidu.event(e),e.stopPropagation(),n.holdHighLight||n._isEnable(t)&&n.$clearHighlight(),n.fire("onmouseoutitem",{index:t,value:n.getDataByIndex(t).value})},_mouseDown:function(e,t){var n=this;e=baidu.event(e),e.stopPropagation(),n.fire("onmousedownitem",{index:t,value:n.getDataByIndex(t).value})},_mouseClick:function(e,t){var n=this;e=baidu.event(e),e.stopPropagation(),n.fire("onmouseclick",{index:t,value:n.getDataByIndex(t).value}),n.$confirm(t)},_keydownHandler:function(){function t(t){var n=e.getInputValue(),r=e.enableIndexs,i=e.selectedIndex;if(!n)return;if(n&&!e.isShowing()){e.fire("onneeddata",n);return}if(r.length==0)return;if(e.upDownArrowTimer)return;e.upDownArrowTimer=setTimeout(function(){clearTimeout(e.upDownArrowTimer),e.upDownArrowTimer=null},200);if("up"==t)switch(i){case-1:e.$clearHighlight(),i=r.length-1,e._focus(i);break;case 0:i=-1,e.$clearHighlight(),e.getElement("input").value=e.currentQuery,e.oldInputValue=e.currentQuery;break;default:i--,e._focus(i)}else switch(i){case-1:i=0,e._focus(i);break;case r.length-1:i=-1,e.$clearHighlight(),e.getElement("input").value=e.currentQuery,e.oldInputValue=e.currentQuery;break;default:i++,e._focus(i)}e.selectedIndex=i}var e=this;return function(n){var r="up";switch(n.keyCode){case 27:case 9:e.hide();break;case 13:n.preventDefault(),n.stopPropagation(),e.selectedIndex>=0&&e.holdHighLight?e.$confirm(e.enableIndexs[e.selectedIndex]):(e.fire("onconfirm",{data:e.getInputValue()}),e.isShowing()&&e._hide());break;case 40:r="down";case 38:n.preventDefault(),n.stopPropagation(),t(r);break;default:}}},$dispose:function(){var e=this;if(e.disposed)return;e.suggestion&&(e.suggestion.$dispose(),e.hide()),magic.Base.prototype.$dispose.call(e)}}),magic.setup.suggestion=function(e,t){var e=baidu.dom("#"+e).get(0),n=magic.setup(e,magic.control.Suggestion,t);return n.$mappingDom("input",e),n.fire("onload"),n},baidu.lang.isElement=baidu.isElement,baidu.lang.guid=function(){return baidu.id()},baidu.createChain("fn",function(e){return new baidu.fn.$Fn(~"function|string".indexOf(baidu.type(e))?e:function(){})},function(e){this.fn=e}),baidu.fn.extend({bind:function(e){var t=this.fn,n=arguments.length>1?Array.prototype.slice.call(arguments,1):null;return function(){var r=baidu.type(t)==="string"?e[t]:t,i=n?n.concat(Array.prototype.slice.call(arguments,0)):arguments;return r.apply(e||r,i)}}}),baidu.fn.bind=function(e,t){var n=baidu.fn(e);return n.bind.apply(n,Array.prototype.slice.call(arguments,1))},baidu.makeArray=function(e,t){var n=t||[];return e?(e.length==null||~"string|function|regexp".indexOf(baidu.type(e))?[].push.call(n,e):baidu.merge(n,e),n):n},baidu.array.extend({each:function(e,t){return baidu.each(this,e,t)},forEach:function(e,t){return baidu.forEach(this,e,t)}}),baidu.array.each=baidu.array.forEach=function(e,t,n){var r=function(e,r,i){return t.call(n||i,r,e,i)};return baidu.isEnumerable(e)?baidu.each(e,typeof t=="function"?r:"",n):e},baidu.array.extend({removeAt:function(e){return baidu.check("number","baidu.array.removeAt"),this.splice(e,1)[0]}}),baidu.dom.match=function(){function n(e){var t=[],n;while(e=e.parentNode)e.nodeType&&t.push(e);for(var n=t.length-1;n>-1;n--)if(t[n].nodeType==1||t[n].nodeType==9)return t[n];return null}var e=/^[\w\#\-\$\.\*]+$/,t=document.createElement("DIV");return t.id="__tangram__",function(e,t,r){var i,s=baidu.array();switch(baidu.type(t)){case"$DOM":for(var o=e.length-1;o>-1;o--)for(var u=t.length-1;u>-1;u--)e[o]===t[u]&&s.push(e[o]);break;case"function":baidu.forEach(e,function(e,n){t.call(e,n)&&s.push(e)});break;case"HTMLElement":baidu.forEach(e,function(e){e==t&&s.push(e)});break;case"string":var a=baidu.query(t,r||document);baidu.forEach(e,function(e){if(i=n(e)){var r=i.nodeType==1?baidu.query(t,i):a;for(var o=0,u=r.length;o<u;o++)if(r[o]===e){s.push(e);break}}}),s=s.unique();break;default:s=baidu.array(e).unique()}return s}}(),baidu.dom.extend({children:function(e){var t=[];return this.each(function(){baidu.forEach(this.children||this.childNodes,function(e){e.nodeType==1&&t.push(e)})}),this.pushStack(baidu.dom.match(t,e))}}),baidu.dom.children=function(e){return baidu.check("string|HTMLElement","baidu.dom.children"),baidu.dom(baidu.isString(e)?"#"+e:e).children().toArray()},baidu.dom.extend({filter:function(e){return this.pushStack(baidu.dom.match(this,e))}}),baidu.dom.extend({remove:function(e,t){arguments.length>0&&baidu.check("^string(?:,boolean)?$","baidu.dom.remove");var n=e?this.filter(e):this;for(var r=0,i;i=n[r];r++)!t&&i.nodeType===1&&(baidu._util_.cleanData(i.getElementsByTagName("*")),baidu._util_.cleanData([i])),i.parentNode&&i.parentNode.removeChild(i);return this}}),baidu.dom.extend({closest:function(e,t){var n=baidu.array();return baidu.forEach(this,function(r){var i=[r];while(r=r.parentNode)r.nodeType&&i.push(r);i=baidu.dom.match(i,e,t),i.length&&n.push(i[0])}),this.pushStack(n.unique())}}),void function(){function e(e){this._options=e,this._constructor()}e.prototype._constructor=function(){var e=this,t=e._options;e._element=baidu.lang.isElement(t.content)&&t.content,e.guid=e._element.id||baidu.lang.guid()+"-carousel-item",e._element&&!e._element.id&&(e._element.id=e.guid)},e.prototype.render=function(e,t){if(this._element)return;var n=this,r=n._options,i=baidu.dom(e).children(),s=i[0]?i[0].tagName:"li",o="<"+s+' id="#{rsid}" class="#{class}">#{content}</'+s+">",u=t=="forward"?"append":"prepend";baidu.dom(e)[u](baidu.string.format(o,{rsid:n.guid,"class":"tang-carousel-item"+(r.empty?" tang-carousel-item-empty":""),content:r.empty?"&nbsp;":""})),n._element=baidu.dom("#"+n.guid).get(0)},e.prototype.insert=function(e,t){var n=this;n._element?t=="forward"?e.appendChild(n._element):e.insertBefore(n._element,e.firstChild):n.render(e,t)},e.prototype.loadContent=function(){var e=this},e.prototype.getElement=function(){var e=this;return e._element||baidu.dom("#"+this.guid).get(0)},magic.control.Carousel=baidu.lang.createClass(function(t){var n=this,r=t.focusRange,i;n._options=baidu.object.extend({viewSize:3,step:1,focusRange:{min:0,max:t.viewSize-1||2},orientation:"horizontal",originalIndex:0,isLoop:!1},t),i=n._options,n._selectedIndex=i.originalIndex,r&&(i.focusRange={min:Math.max(0,r.min),max:Math.min(i.viewSize-1,r.max)}),n._items=i.items||[],n._dataIds=[],n._datas={},n.on("onfocus",function(){n._scrolling=!1}),n.on("onload",function(t){var r=n._axis[n._options.orientation],i=n._selectedIndex,s=n._options,o=s.focusRange,u=baidu.fn.bind("_onEventHandler",n);n.$mappingDom("container",baidu(".tang-carousel-container",n.getElement())[0]).$mappingDom("element",baidu(".tang-carousel-element",n.getElement())[0]),baidu.dom(baidu.dom(n.getElement("element")).children()).each(function(t,r){var s=new e({content:r});n._dataIds.push(s.guid),n._datas[s.guid]=s,baidu.dom(r)[i==t?"addClass":"removeClass"]("tang-carousel-item-selected")}),n._clear(i,o[i>(n._dataIds.length-1)/2?"max":"min"],!0),n._resize(),baidu.dom(n.getElement("element")).on("click",u),baidu.dom(n.getElement("element")).on("mouseover",u),baidu.dom(n.getElement("element")).on("mouseout",u),n.on("ondispose",function(){baidu.dom(n.getElement("element")).off("click",u),baidu.dom(n.getElement("element")).off("mouseover",u),baidu.dom(n.getElement("element")).off("mouseout",u)})})},{type:"magic.control.Carousel",superClass:magic.Base}).extend({_axis:{horizontal:{size:"width",offsetPos:"offsetLeft",offsetSize:"offsetWidth",scrollPos:"scrollLeft"},vertical:{size:"height",offsetPos:"offsetTop",offsetSize:"offsetHeight",scrollPos:"scrollTop"}},_onEventHandler:function(e){var t=this,n=t._options,r=t.getElement("element"),i=e.target;if(!baidu.dom.contains(t.getElement("element"),i))return;var s=baidu.dom(i).closest(".tang-carousel-item").get(0);if(e.type==="mouseover")var o=e.fromElement||e.relatedTarget;else if(e.type==="mouseout")var o=e.toElement||e.relatedTarget;if(baidu.dom(o).closest(s).size()>0)return;t.fire("on"+e.type.toLowerCase()+"item",{DOMEvent:e,index:baidu.array.indexOf(t._dataIds,s.id)})},_getItemBound:function(){var e=this,t=e._options,n=t.orientation.toLowerCase()=="horizontal",r=e._axis[t.orientation],i=e._bound,s;return i||(s=baidu.dom(e.getElement("element")).children().get(0),s&&(i=e._bound={marginPrev:parseInt(baidu.dom(s).css("margin"+(n?"Left":"Top")),10),marginNext:parseInt(baidu.dom(s).css("margin"+(n?"Right":"Bottom")),10),size:s[r.offsetSize]},i.bound=i.size+(n?i.marginPrev+i.marginNext:Math.max(i.marginPrev,i.marginNext)))),i||{marginPrev:0,marginNext:0,size:0,bound:0}},_resize:function(){var e=this,t=e._axis[e._options.orientation],n=e.getElement("element"),r=baidu.dom(n).children();n.style[t.size]=r.length*e._getItemBound().bound+"px"},_clear:function(e,t,n){var r=this,i=r._axis[r._options.orientation],s=r._options,o=s.viewSize,u=s.focusRange,a=r._dataIds.length,f=baidu.makeArray(baidu.dom(r.getElement("element")).children()),l=baidu.array(f).indexOf(r._getItem(e).getElement());n&&(e-u.min<0&&(t=e),e+o-u.max>a&&(t=o-a+e)),baidu(f).each(function(e,n){(e<l-t||e>l+o-t-1)&&baidu.dom(n).remove()}),r.getElement("container")[i.scrollPos]=0},_getItem:function(e){var t=this;return t._datas[typeof e=="string"?e:t._dataIds[e]]},_toggle:function(e){var t=this;baidu.dom("#"+t._dataIds[t._selectedIndex]).removeClass("tang-carousel-item-selected"),t._selectedIndex=e,baidu.dom("#"+t._dataIds[e]).addClass("tang-carousel-item-selected")},_scrollTo:function(t,n){var r=this,i=r._options,s=i.focusRange,o=r._selectedIndex,u=r._axis[i.orientation],n=n||(t>o?"forward":"backward"),a=n.toLowerCase()=="forward",f=r.getElement("container"),l=r.getElement("element"),c=r._getItemBound(),h=baidu.dom("#"+r._getItem(t).guid).get(0),p=r._dataIds.length,d=baidu.makeArray(baidu.dom(l).children()),v=baidu.array.indexOf(d,r._getItem(o).getElement()),m=((a?1:-1)*(t-o)+p)%p+(a?i.viewSize-s.max-1:s.min)-(a?d.length-v-1:v),g=[],y,b,w,E,S;if(r._scrolling)return;r._scrolling=!0;if(!h||h[u.offsetPos]<s.min*c.bound||h[u.offsetPos]-c.marginPrev>s.max*c.bound){for(var x=0;x<m;x++)y=(o+(a?d.length-v-1:-v)+(a?1:-1)*(x+1)+p)%p,b=baidu.dom("#"+r._dataIds[y]).get(0),E=b?new e({empty:!0}):r._getItem(y),E.insert(l,n),E.loadContent(),b&&g.push({empty:E.getElement(),item:b});r._resize(),!a&&(f[u.scrollPos]+=c.bound*m);if(r.fire("onbeforescroll",{index:t,distance:(a?1:-1)*c.bound*m,empty:g})){r._toggle(t);while(g.length>0)S=g.shift(),l.replaceChild(S.item,S.empty),baidu.dom(S.empty).remove();r._clear(t,s[a?"max":"min"]),r._resize(),r.fire("onfocus",{direction:n})}}else r._toggle(t),r.fire("onfocus",{direction:n})},_basicFlip:function(e){var t=this,n=t._options,r=n.focusRange,i=e=="forward"?1:-1,s=t._selectedIndex,o=t._dataIds.length,u=n.isLoop?(s+i*n.step+o)%o:Math.min(o-1-(n.viewSize-1-r.max),Math.max(0+r.min,s+i*n.step));t._scrollTo(u,e)},focusPrev:function(){this._basicFlip("backward")},focusNext:function(){this._basicFlip("forward")},focus:function(e,t){var e=Math.min(Math.max(0,e),this._dataIds.length-1);this._scrollTo(e,t)},getCurrentIndex:function(){return this._selectedIndex},getTotalCount:function(){return this._dataIds.length},$dispose:function(){var e=this;if(e.disposed)return;magic.Base.prototype.$dispose.call(e)}})}(),magic.Carousel=baidu.lang.createClass(function(e){},{type:"magic.Carousel",superClass:magic.control.Carousel}).extend({tplItem:'<li class="#{class}">#{content}</li>',toHTMLString:function(){var e=this,t=e._options.items.length,n=[];for(var r=0;r<t;r++)n.push(baidu.string.format(e.tplItem,{"class":"tang-carousel-item",content:e._items[r].content}));return baidu.string.format('<div class="#{containerClass}"><ul class="#{elementClass}">#{content}</ul></div>',{containerClass:"tang-carousel-container",elementClass:"tang-carousel-element",content:n.join("")})},render:function(e){var t=this,n;if(t.getElement())return;t.$mappingDom("",baidu.dom("#"+e).get(0)||document.body),n=t.getElement(),baidu.dom(n).addClass("tang-ui tang-carousel").append(t.toHTMLString()),t.fire("ondomready"),t.fire("onload")},$dispose:function(){var e=this,t;if(e.disposed)return;baidu.dom(e.getElement()).removeClass("tang-ui tang-carousel"),t=e.getElement("container"),magic.Base.prototype.$dispose.call(e),baidu.dom(t).remove(),t=null}}),magic.setup.carousel=function(e,t){var n=magic.setup(baidu.dom("#"+e).get(0),magic.control.Carousel,t);return n.fire("onload"),n},baidu.base.register=function(e,t,n){(e._reg_||(e._reg_=[])).push(t);for(var r in n)e.prototype[r]=n[r]},baidu.lang.register=baidu.base.register,baidu.lang.register(magic.control.Carousel,function(e){function i(){var e=t.getElement("prev"),n=t.getElement("next");baidu.dom(e)[t.isFirst()?"addClass":"removeClass"]("tang-carousel-btn-prev-disabled"),baidu.dom(n)[t.isLast()?"addClass":"removeClass"]("tang-carousel-btn-next-disabled"),baidu.dom(e)[t.isFirst()?"removeClass":"addClass"]("tang-carousel-btn-prev"),baidu.dom(n)[t.isLast()?"removeClass":"addClass"]("tang-carousel-btn-next")}var t=this,n,r;t._options.button=baidu.object.extend({enable:!0},t._options.button);if(!t._options.button.enable)return;n=baidu.fn.bind("_onButtonClick",t,"backward"),r=baidu.fn.bind("_onButtonClick",t,"forward"),t.on("onload",function(e){t.$mappingDom("prev",baidu(".tang-carousel-btn-prev",t.getElement())[0]).$mappingDom("next",baidu(".tang-carousel-btn-next",t.getElement())[0]),baidu.dom(t.getElement("prev")).on("click",n),baidu.dom(t.getElement("next")).on("click",r),i()}),t.on("onfocus",function(){i()}),t.on("ondispose",function(){baidu.dom(t.getElement("prev")).off("click",n),baidu.dom(t.getElement("next")).off("click",r)})},{_onButtonClick:function(e,t){var n=this;if(e=="forward"?n.isLast():n.isFirst())return;n._basicFlip(e)},_isLimit:function(
e){var t=this,n=t._options,r=n.focusRange,i=t._selectedIndex,s=e=="forward"?i>=t.getTotalCount()-1-(n.viewSize-1-r.max):i<=r.min;return n.isLoop?!1:s},isFirst:function(){return this._isLimit("backward")},isLast:function(){return this._isLimit("forward")}}),baidu.lang.register(magic.Carousel,function(e){var t=this,n='<a href="#" class="tang-carousel-btn #{class}" onclick="return false;">#{content}</a>';t._options.button=baidu.object.extend({buttonLabel:{prev:"",next:""}},t._options.button);if(!t._options.button.enable)return;t.on("ondomready",function(e){var r=t.getElement();baidu.dom(r).prepend(baidu.string.format(n,{"class":"tang-carousel-btn-prev",content:t._options.button.buttonLabel.prev})),baidu.dom(r).append(baidu.string.format(n,{"class":"tang-carousel-btn-next",content:t._options.button.buttonLabel.next})),t.on("ondispose",function(){baidu(["prev","next"]).each(function(e,n){baidu.dom(t.getElement(n)).remove()})})})}),void function(e){if(e.mousewheel)return;var t=/firefox/i.test(navigator.userAgent),n=/msie/i.test(navigator.userAgent);baidu.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,n){e[t]={bindType:n,pack:function(e){var n=baidu.dom.contains;return function(r){var i=r.relatedTarget;r.type=t;if(!i||i!==this&&!n(this,i))return e.apply(this,arguments)}}}}),n||baidu.each({focusin:"focus",focusout:"blur"},function(t,n){e[t]={bindType:n,attachElements:"textarea,select,input,button,a"}}),e.mousewheel={bindType:t?"DOMMouseScroll":"mousewheel",pack:function(e){return function(n){var r=n.originalEvent;return n.type="mousewheel",n.wheelDelta=n.wheelDelta||(t?r.detail*-40:r.wheelDelta)||0,e.apply(this,arguments)}}}}(baidu.event.special),baidu.lang.register(magic.control.Carousel,function(e){var t=this,n;t._options.autoScroll=baidu.object.extend({enable:!0,interval:1e3,direction:"forward"},t._options.autoScroll),n=t._options.autoScroll;if(!n.enable)return;n._autoScrolling=!0,n.direction=n.direction.toLowerCase(),t.on("onload",function(e){var n=baidu.fn.bind("_onMouseEventHandler",t);baidu.dom(t.getElement("element")).on("mouseenter",n),baidu.dom(t.getElement("element")).on("mouseleave",n),t.on("ondispose",function(){baidu.dom(t.getElement("element")).off("mouseenter",n),baidu.dom(t.getElement("element")).off("mouseleave",n)}),t.start()}),t.on("onfocus",function(e){if(!n._autoScrolling)return;e.target.start()}),t.on("ondispose",function(e){e.target.stop()})},{_onMouseEventHandler:function(e){var t=this,n={mouseover:"mouseenter",mouseout:"mouseleave"},r=e.type;t.fire("on"+(n[r]||r),{DOMEvent:e})},start:function(){var e=this,t=e._options.autoScroll;t._autoScrolling=!0,clearTimeout(t._autoScrollTimeout),t._autoScrollTimeout=setTimeout(function(){e._basicFlip(t.direction)},t.interval)},stop:function(){var e=this,t=e._options.autoScroll;clearTimeout(t._autoScrollTimeout),t._autoScrolling=!1}}),baidu.fx=baidu.fx||{},baidu.fx.Timeline=function(e){baidu.lang.Class.call(this),this.interval=16,this.duration=500,this.dynamic=!0,baidu.object.extend(this,e)},baidu.lang.inherits(baidu.fx.Timeline,baidu.lang.Class,"baidu.fx.Timeline").extend({launch:function(){var e=this;return e.dispatchEvent("onbeforestart"),typeof e.initialize=="function"&&e.initialize(),e["btime"]=(new Date).getTime(),e["etime"]=e["btime"]+(e.dynamic?e.duration:0),e["pulsed"](),e},"pulsed":function(){var e=this,t=(new Date).getTime();e.percent=(t-e["btime"])/e.duration,e.dispatchEvent("onbeforeupdate");if(t>=e["etime"]){typeof e.render=="function"&&e.render(e.transition(e.percent=1)),typeof e.finish=="function"&&e.finish(),e.dispatchEvent("onafterfinish"),e.dispose();return}typeof e.render=="function"&&e.render(e.transition(e.percent)),e.dispatchEvent("onafterupdate"),e["timer"]=setTimeout(function(){e["pulsed"]()},e.interval)},transition:function(e){return e},cancel:function(){this["timer"]&&clearTimeout(this["timer"]),this["etime"]=this["btime"],typeof this.restore=="function"&&this.restore(),this.dispatchEvent("oncancel"),this.dispose()},end:function(){this["timer"]&&clearTimeout(this["timer"]),this["etime"]=this["btime"],this["pulsed"]()}}),baidu.fx.create=function(e,t,n){var r=new baidu.fx.Timeline(t);r.element=e,r.__type=n||r.__type,r["original"]={};var i="baidu_current_effect";return r.addEventListener("onbeforestart",function(){var e=this,t;e.attribName="att_"+e.__type.replace(/\W/g,"_"),t=e.element.getAttribute(i),e.element.setAttribute(i,(t||"")+"|"+e.guid+"|",0),e.overlapping||((t=e.element.getAttribute(e.attribName))&&baiduInstance(t).cancel(),e.element.setAttribute(e.attribName,e.guid,0))}),r["clean"]=function(e){var t=this,n;if(e=t.element)e.removeAttribute(t.attribName),n=e.getAttribute(i),n=n.replace("|"+t.guid+"|",""),n?e.setAttribute(i,n,0):e.removeAttribute(i)},r.addEventListener("oncancel",function(){this["clean"](),this["restore"]()}),r.addEventListener("onafterfinish",function(){this["clean"](),this.restoreAfterFinish&&this["restore"]()}),r.protect=function(e){this["original"][e]=this.element.style[e]},r["restore"]=function(){var e=this["original"],t=this.element.style,n;for(var r in e){n=e[r];if(typeof n=="undefined")continue;t[r]=n,!n&&t.removeAttribute?t.removeAttribute(r):!n&&t.removeProperty&&t.removeProperty(r)}},r},baidu.fx.scrollBy=function(e,t,n){if(!(e=baidu.dom.g(e))||typeof t!="object")return null;var r={},i={};r.x=t[0]||t.x||0,r.y=t[1]||t.y||0;var s=baidu.fx.create(e,baidu.object.extend({initialize:function(){var t=i.sTop=e.scrollTop,n=i.sLeft=e.scrollLeft;i.sx=Math.min(e.scrollWidth-e.clientWidth-n,r.x),i.sy=Math.min(e.scrollHeight-e.clientHeight-t,r.y)},transition:function(e){return 1-Math.pow(1-e,2)},render:function(t){e.scrollTop=i.sy*t+i.sTop,e.scrollLeft=i.sx*t+i.sLeft},restore:function(){e.scrollTop=i.sTop,e.scrollLeft=i.sLeft}},n),"baidu.fx.scroll");return s.launch()},baidu.fx.scrollTo=function(e,t,n){if(!(e=baidu.dom.g(e))||typeof t!="object")return null;var r={};return r.x=(t[0]||t.x||0)-e.scrollLeft,r.y=(t[1]||t.y||0)-e.scrollTop,baidu.fx.scrollBy(e,r,n)},baidu.lang.instance=function(e){return baidu._global_&&baidu._global_._instances&&baidu._global_._instances[e]||null},baidu.fx.current=function(e){if(!(e=baidu.dom.g(e)))return null;var t,n,r=/\|([^\|]+)\|/g;do if(n=e.getAttribute("baidu_current_effect"))break;while((e=e.parentNode)&&e.nodeType==1);if(!n)return null;if(t=n.match(r)){r=/\|([^\|]+)\|/;for(var i=0;i<t.length;i++)r.test(t[i]),t[i]=baidu._global_._instances[RegExp.$1]}return t},baidu.lang.register(magic.control.Carousel,function(e){var t=this;t._options.fx=baidu.object.extend({enable:!0},t._options.fx);if(!t._options.fx.enable)return;t.on("onbeforescroll",function(e){e.returnValue=!1;if(baidu.fx.current(t.getElement("container")))return;var n=t._options,r=t._axis[n.orientation],i=n.orientation=="horizontal",s=t.getElement("container"),o=s[r.scrollPos]+e.distance,u=baidu.object.extend({onbeforeupdate:function(){if(e.empty.length<=0)return;var t=e.empty[0],n,i;if(e.distance<0?t.empty[r.offsetPos]+t.empty[r.offsetSize]-s[r.scrollPos]>=0:t.empty[r.offsetPos]-s[r.scrollPos]<=s[r.offsetSize])n=t.empty.parentNode,i=t.empty.cloneNode(!0),n.replaceChild(i,t.empty),n.replaceChild(t.empty,t.item),n.replaceChild(t.item,i),e.empty.shift()},onafterfinish:function(){if(t.disposed)return;t._toggle(e.index),t._clear(e.index,n.focusRange[e.distance<0?"min":"max"]),t._resize(),t.fire("onfocus",{direction:e.distance>0?"forward":"backward"})}},n.fx);baidu.fx.scrollTo(s,{x:i?o:0,y:i?0:o},u)})}),baidu.lang.register(magic.control.Carousel,function(e){var t=this;t._options.itemsModify=baidu.object.extend({enable:!0},t._options.itemsModify);if(!t._options.itemsModify.enable)return},{removeItem:function(e){if(e>=this._dataIds.length)return;var t=this,n=t._options.focusRange,r=t._options.viewSize,i=t.getElement("element"),s=baidu.makeArray(baidu.dom(i).children()),o=t._dataIds.length,u=baidu("#"+t._dataIds[e]),a=[],f,l;baidu.array(s).each(function(e,t){a.push(t.id)}),baidu.array(a).indexOf(t._dataIds[e])!=-1&&(baidu(u).remove(),t._dataIds.length>r&&(f=baidu.array(t._dataIds).indexOf(s[r-1].id)+1,f==t._dataIds.length&&(f=0),l=t._getItem(f),l.insert(i,"forward"),l.loadContent(),t._resize())),delete t._datas[t._getItem(e).guid],baidu.array(t._dataIds).removeAt(e),e>=t._dataIds.length&&(e=0),t._selectedIndex==e&&t._dataIds.length>0&&t.focus(e)}}),baidu.event.preventDefault=function(e){return(new baidu.event(e)).preventDefault()},magic.Pager=baidu.lang.createClass(function(e){var t=this;this.currentPage=1,this.totalPage=1,this.viewSize=10,this.currentPagePos=4,this.labelFirst="\u9996\u9875",this.labelPrev="\u4e0a\u4e00\u9875",this.labelNext="\u4e0b\u4e00\u9875",this.labelLast="\u5c3e\u9875",this.tplURL="##{pageNum}",this.tplLabelNormal="#{pageNum}",this.tplLabelCurrent="#{pageNum}",baidu.object.extend(this,e),this.currentPage=Math.max(this.currentPage,1)},{type:"magic.Pager",superClass:magic.Base}).extend({_buildLink:function(e,t,n){return"<a onclick=\"return baiduInstance('"+this.guid+"').$update("+e+')" href="'+baidu.string.format(this.tplURL,{pageNum:e})+'" class="tang-pager-'+t+'">'+n+"</a>"},$update:function(e){this.currentPage=e;var t=this.getElement();return t.innerHTML="",this.render(this.$getId()),this.fire("pagechange",{pageNum:e})},$toHTMLString:function(){var e,t=[],n=this.totalPage<this.viewSize||this.currentPage<=this.currentPagePos?1:Math.min(this.currentPage-this.currentPagePos,this.totalPage-this.viewSize+1),r=Math.min(this.totalPage,n+this.viewSize-1);t.push('<div id="'+this.$getId("main")+'" class="tang-pager-main">'),1<this.currentPage&&(t.push(this._buildLink(1,"first",this.labelFirst)),t.push(this._buildLink(this.currentPage-1,"previous",this.labelPrev)));for(e=n;e<this.currentPage;e++)t.push(this._buildLink(e,"normal",baidu.string.format(this.tplLabelNormal,{pageNum:e})));t.push('<span class="tang-pager-current">'+baidu.string.format(this.tplLabelCurrent,{pageNum:this.currentPage})+"</span>");for(e=this.currentPage+1;e<=r;e++)t.push(this._buildLink(e,"normal",baidu.string.format(this.tplLabelNormal,{pageNum:e})));return this.totalPage>this.currentPage&&(t.push(this._buildLink(this.currentPage+1,"next",this.labelNext)),t.push(this._buildLink(this.totalPage,"last",this.labelLast))),t.push("</div>"),t.join("")},render:function(e){this.getElement()||this.$mappingDom("",e||document.body),e=baidu.dom("#"+e),baidu.dom(e).addClass("tang-pager").append(this.$toHTMLString()),this.fire("load")},$dispose:function(){if(this.disposed)return;var e=this.getElement(),t=this.getElement("main");baidu.dom(e).removeClass("tang-pager"),magic.Base.prototype.$dispose.call(this),baidu.dom(t).remove(),e=t=null}}),baidu.date=baidu.date||{},baidu.createChain("number",function(e){var t=parseFloat(e),n=isNaN(t)?t:e,r=typeof n=="number"?Number:String,i=r.prototype;return n=new r(n),baidu.forEach(baidu.number.$Number.prototype,function(e,t){i[t]||(n[t]=e)}),n}),baidu.number.extend({pad:function(e){var t=this,n="",r=t<0,i=String(Math.abs(t));return i.length<e&&(n=(new Array(e-i.length+1)).join("0")),(r?"-":"")+n+i}}),baidu.date.format=function(e,t){function n(e,n){t=t.replace(e,n)}if("string"!=typeof t)return e.toString();var r=baidu.number.pad,i=e.getFullYear(),s=e.getMonth()+1,o=e.getDate(),u=e.getHours(),a=e.getMinutes(),f=e.getSeconds();return n(/yyyy/g,r(i,4)),n(/yy/g,r(parseInt(i.toString().slice(2),10),2)),n(/MM/g,r(s,2)),n(/M/g,s),n(/dd/g,r(o,2)),n(/d/g,o),n(/HH/g,r(u,2)),n(/H/g,u),n(/hh/g,r(u%12,2)),n(/h/g,u%12),n(/mm/g,r(a,2)),n(/m/g,a),n(/ss/g,r(f,2)),n(/s/g,f),t},baidu.lang.isObject=baidu.isObject,baidu.lang.isFunction=baidu.isFunction,baidu.object.merge=function(){function e(e){return baidu.lang.isObject(e)&&!baidu.lang.isFunction(e)}function t(t,n,r,i,s){if(n.hasOwnProperty(r))if(s&&e(t[r]))baidu.object.merge(t[r],n[r],{overwrite:i,recursive:s});else if(i||!(r in t))t[r]=n[r]}return function(e,n,r){var i=0,s=r||{},o=s.overwrite,u=s.whiteList,a=s.recursive,f;if(u&&u.length){f=u.length;for(;i<f;++i)t(e,n,u[i],o,a)}else for(i in n)t(e,n,i,o,a);return e}}(),baidu.i18n=baidu.i18n||{},baidu.i18n.date=baidu.i18n.date||{getDaysInMonth:function(e,t){var n=[31,28,31,30,31,30,31,31,30,31,30,31];return t==1&&baidu.i18n.date.isLeapYear(e)?29:n[t]},isLeapYear:function(e){return!(e%400)||!(e%4)&&!!(e%100)},toLocaleDate:function(e,t,n){return this._basicDate(e,t,n||baidu.i18n.currentLocale)},_basicDate:function(e,t,n){var r=baidu.i18n.cultures[n||baidu.i18n.currentLocale].timeZone,i=r*60,s,o,u=e.getTime();return t?(s=baidu.i18n.cultures[t].timeZone,o=s*60):(o=-1*e.getTimezoneOffset(),s=o/60),new Date(s!=r?u+(i-o)*6e4:u)},format:function(e,t){var n=baidu.i18n.cultures[t||baidu.i18n.currentLocale];return baidu.date.format(baidu.i18n.date.toLocaleDate(e,"",t),n.calendar.dateFormat)}},baidu.i18n.cultures=baidu.i18n.cultures||{},baidu.i18n.cultures["zh-CN"]=baidu.object.extend(baidu.i18n.cultures["zh-CN"]||{},function(){var e="%u4E00,%u4E8C,%u4E09,%u56DB,%u4E94,%u516D,%u4E03,%u516B,%u4E5D,%u5341".split(",");return{calendar:{dateFormat:"yyyy-MM-dd",titleNames:"#{yyyy}"+unescape("%u5E74")+"&nbsp;#{MM}"+unescape("%u6708"),monthNamesShort:[1,2,3,4,5,6,7,8,9,10,11,12],monthNames:function(){var t=e.length,n=[];for(var r=0;r<12;r++)n.push(unescape(e[r]||e[t-1]+e[r-t]));return n}(),dayNames:function(){var t={mon:0,tue:1,wed:2,thu:3,fri:4,sat:5,sun:"%u65E5"};for(var n in t)t[n]=unescape(e[t[n]]||t[n]);return t}()},timeZone:8,whitespace:new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g"),number:{group:",",groupLength:3,decimal:".",positive:"",negative:"-",_format:function(e,t){return baidu.i18n.number._format(e,{group:this.group,groupLength:this.groupLength,decimal:this.decimal,symbol:t?this.negative:this.positive})}},currency:{symbol:unescape("%uFFE5")},language:function(){var e={ok:"%u786E%u5B9A",cancel:"%u53D6%u6D88",signin:"%u6CE8%u518C",signup:"%u767B%u5F55"};for(var t in e)e[t]=unescape(e[t]);return e}()}}()),baidu.i18n.currentLocale="zh-CN",baidu.dom.extend({data:function(){var e=baidu.key,t=baidu.global("_maps_HTMLElementData");return function(n,r){baidu.forEach(this,function(t){!t[e]&&(t[e]=baidu.id())});if(baidu.isString(n)){if(typeof r=="undefined"){var i,s;s=this[0]&&(i=t[this[0][e]])&&i[n];if(typeof s!="undefined")return s;var o=this[0].getAttribute("data-"+n);return~String(o).indexOf("{")?Function("return "+o)():o}baidu.forEach(this,function(i){var s=t[i[e]]=t[i[e]]||{};s[n]=r})}else baidu.type(n)=="object"&&baidu.forEach(this,function(r){var i=t[r[e]]=t[r[e]]||{};baidu.forEach(n,function(e,t){i[t]=n[t]})});return this}}()}),baidu._util_.isHidden=function(e){return baidu.dom(e).getCurrentStyle("display")==="none"||!baidu._util_.contains(e.ownerDocument,e)},baidu.dom.extend({hide:function(){var e=[],t,n,r;return this.each(function(i,s){if(!s.style)return;t=baidu(s),e[i]=t.data("olddisplay"),r=s.style.display,e[i]||(n=baidu._util_.isHidden(s),(r&&r!=="none"||!n)&&t.data("olddisplay",n?r:t.getCurrentStyle("display"))),s.style.display="none"})}}),baidu.lang.isDate=baidu.isDate,magic.Calendar=baidu.lang.createClass(function(e){var t=this;t._options=baidu.object.extend({weekStart:"sun",initDate:new Date,highlightDates:[],disabledDates:[],disabledDayOfWeek:[],language:"zh-CN"},e||{}),t.currentDate=new Date(t._options.initDate),t.selectedDate=new Date(t._options.initDate),t.dayNames=[]},{type:"magic.Calendar",superClass:magic.Base}),magic.Calendar.extend({tplSkeleton:'<div id="#{calendarId}" class="#{calendarClass}"><div id="#{titleId}" class="#{titleClass}"></div><div id="#{tableId}" class="#{tableClass}"></div><div id="#{footerId}" class="#{footerClass}"></div></div>',tplDate:'<td id="#{id}" class="#{class}" onmouseover="#{mouseover}" onmouseout="#{mouseout}" onclick="#{click}">#{date}</td>',render:function(e){var t=this;baidu.type(e)==="string"&&(e="#"+e),t.container=baidu(e)[0],t._renderSkeleton(),t._renderTitle(),t._renderDateTable(),t._renderNavBtn(),t._bindTable(),t._bindNavBtn(),t.fire("render")},_rerender:function(){var e=this;e._renderTitle(),e._renderDateTable(),e._bindTable()},_getId:function(e){return this._eid+(e===undefined?"tang_calendar":"tang_calendar_"+e)},_getClass:function(e){return e===undefined?"tang-calendar":"tang-calendar-"+e},_renderSkeleton:function(){var e=this,t=e.container;baidu(t).append(baidu.string.format(e.tplSkeleton,{calendarId:e._getId(),calendarClass:e._getClass(),titleId:e._getId("title"),titleClass:e._getClass("title"),tableId:e._getId("table"),tableClass:e._getClass("table"),footerId:e._getId("footer"),footerClass:e._getClass("footer")})),e.titleEl=baidu("#"+e._getId("title"))[0],e.tableEl=baidu("#"+e._getId("table"))[0];var n=baidu("#"+e._getId("footer"));e.footerEl=n[0],n.hide(),e.$mappingDom("",baidu("#"+e._getId())[0]),e.$mappingDom("calendar",baidu("#"+e._getId())[0]),e.$mappingDom("title",e.titleEl),e.$mappingDom("table",e.tableEl),e.$mappingDom("footer",e.footerEl)},_renderTitle:function(){var e=this,t=e.currentDate,n=t.getFullYear(),r=t.getMonth()+1;e.titleEl.innerHTML=baidu.string.format(baidu.i18n.cultures[e._options.language].calendar.titleNames,{yyyy:n,MM:baidu.i18n.cultures[e._options.language].calendar.monthNamesShort[r-1]})},_renderDateTable:function(){var e=this._getTheadString(),t=this._getTbodyString();this.tableEl.innerHTML='<table border="0" cellpadding="0" cellspacing="0">'+e+t+"</table>"},_renderNavBtn:function(){var e=this,t=baidu("#"+e._getId())[0],n=document,r=n.createElement("div"),i=n.createElement("div"),s=n.createElement("div"),o=n.createElement("div");r.className=e._getClass("prebtn"),i.className=e._getClass("nextbtn"),s.className=e._getClass("yprebtn"),o.className=e._getClass("ynextbtn"),t.appendChild(r),t.appendChild(i),t.appendChild(s),t.appendChild(o),e.preBtn=r,e.nextBtn=i,e.ypreBtn=s,e.ynextBtn=o,e.$mappingDom("premonthbtn",r),e.$mappingDom("nextmonthbtn",i),e.$mappingDom("preyearbtn",s),e.$mappingDom("preyearhbtn",o)},_bindNavBtn:function(){var e=this,t=e.preBtn,n=e.nextBtn,r=e.ypreBtn,i=e.ynextBtn,s=!1,o,u,a,f,l,c,h,p,d;baidu(t).on("click",o=function(){!s&&e.preMonth(),s=!1,e.fire("premonth")}),baidu(n).on("click",u=function(){!s&&e.nextMonth(),s=!1,e.fire("nextmonth")}),baidu(r).on("click",a=function(){!s&&e.preYear(),s=!1,e.fire("preyear")}),baidu(i).on("click",f=function(){!s&&e.nextYear(),s=!1,e.fire("nextyear")});var v=null,m=function(t,n){function r(){v=setTimeout(function(){n?t=="pre"?e.preYear():e.nextYear():t=="pre"?e.preMonth():e.nextMonth(),s=!0,r()},500)}if(v)return;r()},g=function(){clearTimeout(v),v=null};baidu(t).on("mousedown",l=function(){m("pre")}),baidu(n).on("mousedown",c=function(){m("next")}),baidu(r).on("mousedown",h=function(){m("pre",!0)}),baidu(i).on("mousedown",p=function(){m("next",!0)}),baidu(document).on("mouseup",d=function(){if(e.disposed)return;v&&g()}),e.on("dispose",function(){baidu(t).off("click",o),baidu(n).off("click",u),baidu(r).off("click",a),baidu(i).off("click",f),baidu(t).off("mousedown",l),baidu(n).off("mousedown",c),baidu(r).off("mousedown",h),baidu(i).off("mousedown",p),baidu(document).off("mouseup",d)})},_getTheadString:function(){var e=this,t=["mon","tue","wed","thu","fri","sat","sun"],n,r=[],i=e._options.weekStart.toLowerCase(),s=baidu.array.indexOf(t,i),o=baidu.i18n.cultures[e._options.language].calendar.dayNames,u=0;r.push('<thead class="'+e._getClass("weekdays")+'"><tr>');for(;u<7;u++)s>6&&(s=0),e.dayNames.push(t[s]),n=o[t[s]],r.push("<th>"+n+"</th>"),s++;return r.push("</tr></thead>"),r.join("")},_getTbodyString:function(){var e=this,t=e.dayNames,n=["sun","mon","tue","wed","thu","fri","sat"],r=new Date(e.currentDate),i,s=0,o=[],u=0,a=baidu.i18n.date.getDaysInMonth(r.getFullYear(),r.getMonth()),f=5,l="",c="";r.setDate(1),i=r.getDay(),s=baidu.array.indexOf(t,n[i]),s+a>35&&(f=6),r.setDate(r.getDate()-s);var h=0,p=0,d="";for(;h<f;h++){o.push("<tr>");for(;p<7;p++){d=e._getClass("date"),l="";if(r.getDay()==0||r.getDay()==6)d+=" "+e._getClass("weekend");e._datesEqual(new Date,r)&&(d+=" "+e._getClass("today")),e._datesContains(e._options.highlightDates,r)&&(d+=" "+e._getClass("highlight")),e._datesContains(e._options.disabledDates,r)&&(d+=" "+e._getClass("disable")),e._dayOfWeekInDisabled(r.getDay())&&(d+=" "+e._getClass("disable")),e._datesEqual(e.selectedDate,r)&&(d+=" "+e._getClass("selected"),l='id="'+e._getId("selected")+'"');if(r.getMonth()<e.currentDate.getMonth()||r.getFullYear()<e.currentDate.getFullYear())d+=" "+e._getClass("premonth");else if(r.getMonth()>e.currentDate.getMonth()||r.getFullYear()>e.currentDate.getFullYear())d+=" "+e._getClass("nextmonth");c=e._formatDate(new Date(r.getFullYear()+"/"+(r.getMonth()+1)+"/"+r.getDate())),o.push("<td "+l+' class="'+d+'" date="'+c+'" onmouseover=baiduInstance("'+e.guid+'")._mouseoverHandler(event) onmouseout=baiduInstance("'+e.guid+'")._mouseoutHandler(event)>'+r.getDate()+"</td>"),r.setDate(r.getDate()+1)}o.push("</tr>"),p=0}return"<tbody>"+o.join("")+"</tbody>"},_formatDate:function(e){var t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate();return n=n>=10?n:"0"+n,r=r>=10?r:"0"+r,t+"/"+n+"/"+r},_mouseoverHandler:function(e){var t=this,n;n=baidu.event(e).target,baidu(n).addClass(t._getClass("hover")),t.fire("mouseover",{target:n})},_mouseoutHandler:function(e){var t=this,n;n=baidu.event(e).target,baidu(n).removeClass(t._getClass("hover")),t.fire("mouseout",{target:n})},_bindTable:function(){var e=this,t=baidu("#"+e._getId("table"))[0].getElementsByTagName("tbody")[0],n,r,i,s,o;baidu(t).on("click",o=function(t){n=t.target;if(n.tagName.toUpperCase()!="TD")return;r=n.getAttribute("date"),i=new Date(r);var o=e.selectedDate;i.setHours(o.getHours()),i.setMinutes(o.getMinutes()),i.setSeconds(o.getSeconds());if(e._datesContains(e._options.disabledDates,i))return;if(e._dayOfWeekInDisabled(i.getDay()))return;s=baidu("#"+e._getId("selected"))[0],s&&(s.id="",baidu(s).removeClass(e._getClass("selected"))),n.id=e._getId("selected"),baidu(n).addClass(e._getClass("selected")),r=e._formatDate(i),e.selectedDate=new Date(r),e.fire("selectdate",{date:new Date(r)})}),e.on("dispose",function(){baidu(t).off("click",o)})},_datesEqual:function(e,t){if(baidu.type(e)!="date"||baidu.type(t)!="date")return;var n=e.getFullYear(),r=e.getMonth(),i=e.getDate(),s=t.getFullYear(),o=t.getMonth(),u=t.getDate();return n==s&&r==o&&i==u},_days:{mon:1,tue:2,wed:3,thu:4,fri:5,sat:6,sun:0},_dayOfWeekInDisabled:function(e){var t=this._options.disabledDayOfWeek,n=this._days,r=!1,i=0,s;for(;i<t.length;i++){s=t[i],typeof s=="object"?(n[s.start]||0)<=e&&e<=n[s.end]&&(r=!0):n[s]==e&&(r=!0);if(r)break}return r},_datesContains:function(e,t){var n=this,r=0,i=e.length,s,o=!0;if(baidu.type(t)!="date")return;for(;r<i;r++){s=e[r];if(baidu.lang.isDate(s)){if(n._datesEqual(s,t))return!0}else{s.end&&(s.end=new Date(baidu.date.format(s.end,"yyyy/MM/dd")+" 23:59:59"));if((!s.start||t.getTime()>=s.start.getTime())&&(!s.end||t.getTime()<=s.end.getTime()))return!0}}return!1},go:function(e,t){var n=this;n.currentDate.setFullYear(e),n.currentDate.setDate(1),t=t===undefined?n.currentDate.getMonth():t-1,n.currentDate.setMonth(t),n._rerender()},getDate:function(){return new Date(this.selectedDate)},setDate:function(e){var t=this,n=new Date(e);if(baidu.type(e)!="date")return!1;if(t._datesContains(t._options.disabledDates,n))return;if(t._dayOfWeekInDisabled(n.getDay()))return;return t.currentDate=new Date(e),t.selectedDate=new Date(e),t._rerender(),!0},preMonth:function(){var e=this,t=e.currentDate,n=t.getMonth()+1,r=t.getFullYear();e.go(r,n-1)},nextMonth:function(){var e=this,t=e.currentDate,n=t.getMonth()+1,r=t.getFullYear();e.go(r,n+1)},preYear:function(){var e=this,t=e.currentDate;e.go(t.getFullYear()-1,t.getMonth()+1)},nextYear:function(){var e=this,t=e.currentDate;e.go(t.getFullYear()+1,t.getMonth()+1)},_preDay:function(){var e=this,t=new Date(e.selectedDate);t.setDate(t.getDate()-1),e.setDate(t),e.fire("selectdate",{date:t})},_nextDay:function(){var e=this,t=new Date(e.selectedDate);t.setDate(t.getDate()+1),e.setDate(t),e.fire("selectdate",{date:t})},$dispose:function(){var e=this;if(e.disposed)return;e.container.removeChild(baidu("#"+e._getId())[0]),magic.Base.prototype.$dispose.call(e)}}),magic.control.DatePicker=baidu.lang.createClass(function(e){var t=this;t._options=e,t.language=e.language||"zh-CN",t.format=e.format||baidu.i18n.cultures[t.language].calendar.dateFormat||"yyyy-MM-dd HH:mm:ss",t.popupOption=baidu.object.merge({autoHide:!1,autoTurn:!1,disposeOnHide:!1},e.popupOptions),t.calendarOption=baidu.object.merge({},e.calendarOptions),t.calendarOption.language=t.language,t.showing=!1},{type:"magic.control.DatePicker",superClass:magic.Base}).extend({init:function(){function i(){e.show()}function s(t){var i=baidu.event(t).target,s=n.getElement("calendar");i!=r&&!baidu.dom.contains(s,i)&&s!=i&&e.hide()}var e=this,t=e.popup=new magic.Popup(e.popupOption),n=e.calendar=new magic.Calendar(e.calendarOption),r=e.input=e.getElement("input");e._options.title&&e._options.title.enable&&e.init$title(),n.render(t.getElement("content")),e.calendar.on("selectdate",function(t,n){r.value=baidu.date.format(t.date,e.format),(!n||!n.ignoreHide)&&e.hide(),e.fire("selectdate",{date:new Date(t.date)})}),baidu(r).on("click focus",i),"oninput"in document.body||(r.onpropertychange=function(){if(e.disposed)return;event.propertyName=="value"&&this.oninput&&this.oninput(event)}),r.oninput=function(){if(e.disposed)return;e._getInputDate()&&e.calendar.setDate(e._getInputDate())},baidu(document).on("click",s),e.on("dispose",function(){baidu(r).off("click",i),baidu(r).off("focus",i),baidu(document).off("click",s)}),e.$mappingDom("calendar",n.getElement("calendar"))},show:function(){var e=this,t=new Date;if(e.showing)return;e.showing=!0,e.calendar.setDate(e._getInputDate()||e.calendarOption.initDate||new Date),e.popup.attach(e.input,{offsetY:e.popupOption.offsetY||-1,offsetX:e.popupOption.offsetX||0}),e.fire("show")},hide:function(){var e=this;if(!e.showing)return;e.showing=!1,e.popup.hide(),e.fire("hide")},getDate:function(){return new Date},getSelectedDate:function(){return new Date(this.calendar.getDate())},_getInputDate:function(){var e=this,t=e.input.value,n=[/yyyy|yy/,/M{1,2}/,/d{1,2}/,/H{1,2}/,/m{1,2}/,/s{1,2}/],r=n.length,i=[],s,o,u;if(!t)return;for(var a=0;a<r;a++)if(s=n[a].exec(e.format))o=s.index,i[a]=t.substring(o,o+s[0].length);u=new Date(i[0],i[1]-1,i[2],i[3]||null,i[4]||null,i[5]||null);if(baidu.lang.isDate(u))return u;return},$dispose:function(){var e=this;if(e.disposed)return;e.calendar.$dispose(),e.popup.$dispose(),magic.Base.prototype.$dispose.call(e)}}),magic.setup.datePicker=function(e,t){baidu.type(e)==="string"&&(e="#"+e);var e=baidu(e)[0],n=magic.setup(e,magic.control.DatePicker,t);return n.$mappingDom("input",e),n.init(),n},baidu.lang.register(magic.control.DatePicker,function(){var e=this;e._options.title=baidu.object.extend({enable:!0},e._options.title);if(!e._options.title.enable)return;e.init$title=function(){var t=e.calendar;t.on("titlerender",function(){var e=baidu("#"+t._getId("year"))[0],n=baidu("#"+t._getId("month"))[0],r=baidu("#"+t._getId("yearselect"))[0],i=baidu("#"+t._getId("monthselect"))[0],s,o;baidu(e).on("click",function(){s=t.currentDate.getFullYear()-10,baidu(e).css("display","none"),baidu(r).css("display","");while(s<=t.currentDate.getFullYear()+10)o=document.createElement("option"),o.value=s,o.text=String(s),o.innerText=String(s),r.appendChild(o),s++;r.value=t.currentDate.getFullYear()}),baidu(n).on("click",function(){baidu(n).css("display","none"),baidu(i).css("display","");for(var e=1;e<13;e++)o=document.createElement("option"),o.value=e,o.text=baidu.i18n.cultures[t._options.language].calendar.monthNamesShort[e-1],o.innerText=baidu.i18n.cultures[t._options.language].calendar.monthNamesShort[e-1],i.appendChild(o);i.value=t.currentDate.getMonth()+1}),baidu(r).on("change",function(e){var n=e.target.value;t.go(n,t.currentDate.getMonth()+1)}),baidu(i).on("change",function(e){var n=e.target.value;t.go(t.currentDate.getFullYear(),n)})}),t.tplTitle='<span id="#{id}" class="#{class}" style="cursor:pointer;">#{text}</span>',t._renderTitle=function(){var e=t.currentDate,n=e.getFullYear(),r=e.getMonth()+1,i="",s="",o='<select id="'+t._getId("yearselect")+'" style="display:none"></select>',u='<select id="'+t._getId("monthselect")+'" style="display:none"></select>',a=baidu.i18n.cultures[t._options.language].calendar.titleNames;a=a.split("&nbsp;"),/y/.test(a[0])?(i=baidu.string.format(a[0],{yyyy:n}),s=baidu.string.format(a[1],{MM:baidu.i18n.cultures[t._options.language].calendar.monthNamesShort[r-1]}),this.titleEl.innerHTML=baidu.string.format(t.tplTitle,{id:t._getId("year"),"class":t._getClass("year"),text:i})+o+"&nbsp;&nbsp;"+baidu.string.format(t.tplTitle,{id:t._getId("month"),"class":t._getClass("month"),text:s})+u):(i=baidu.string.format(a[1],{yyyy:n}),s=baidu.string.format(a[0],{MM:baidu.i18n.cultures[t._options.language].calendar.monthNamesShort[r-1]}),this.titleEl.innerHTML=baidu.string.format(t.tplTitle,{id:t._getId("month"),"class":t._getClass("month"),text:s})+u+"&nbsp;&nbsp;"+baidu.string.format(t.tplTitle,{id:t._getId("year"),"class":t._getClass("year"),text:i})+o),t.fire("titlerender")}}},{}),baidu.array.extend({remove:function(e){var t=this.length;while(t--)this[t]===e&&this.splice(t,1);return this}}),void function(){var e="blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave mousewheel change select submit keydown keypress keyup error contextmenu".split(" "),t={},n=function(e){t[e]=function(t,n){return n==null&&(n=t,t=null),arguments.length>0?this.on(e,null,t,n):this.trigger(e)}};for(var r=0,i=e.length;r<i;r++)n(e[r]);baidu.dom.extend(t)}(),baidu.dom.extend({text:function(e){var t=baidu.dom,n=this,r=!1,i;if(this.size()<=0)switch(typeof e){case"undefined":return undefined;default:return n}var s=function(e){var t,n="",r=0,i=e.nodeType;if(i)if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(i===3||i===4)return e.nodeValue;return n};return baidu.forEach(n,function(n,o){var u=t(n);if(i)return;switch(typeof e){case"undefined":return i=s(n),i;case"number":e=String(e);case"string":r=!0,u.empty().append((n&&n.ownerDocument||document).createTextNode(e));break;case"function":r=!0,u.text(e.call(n,o,u.text()))}}),r?n:i}}),magic.control.ComboBox=baidu.lang.createClass(function(e){var t=this;t._options=baidu.object.extend({items:[],originIndex:-1,readonly:!1,viewSize:5,disabled:!1,width:"100%"},e),t.selectValue="",t.highlightIndex=-1,t.menu=new magic.Popup,t.isFocus=!1,t.disabled=this._options.disabled,t.tempValue="",t.menufocusing=!1,magic.control.ComboBox.instanceArray||(magic.control.ComboBox.instanceArray=[]),magic.control.ComboBox.instanceArray.push(t.guid),t.on("load",function(){t.setWidth(t._options.width),t.menu._host=t.getElement("container"),t.menu.offsetY=-1,t.menu.setContent(t._menuContainerToHTMLString()),this._renderMenu(),t.menu.on("show",function(){t.fire("show")}),t.menu.on("beforeshow",function(e){e.returnValue=t.fire("beforeshow")}),t.menu.on("beforehide",function(e){e.returnValue=t.fire("beforehide")}),t.menu.on("hide",function(){t.fire("hide")}),baidu(t.getElement("input-container")).keydown(function(){!t.disabled&&(magic.control.ComboBox.globalActive=t.guid)}),baidu(t.getElement("input-container")).click(function(){!t.disabled&&(magic.control.ComboBox.globalActive=t.guid)}),t._options.readonly?baidu(t.getElement("input-container")).click(function(){t.getElement("arrow").focus(),!t.disabled&&t.menu.show()}):(baidu(t.getElement("arrow")).click(function(){this.focus(),!t.disabled&&t.menu.show()}),baidu(t.getElement("input")).keydown(function(e){t._keydownHandler(e)})),baidu(t.getElement("arrow")).keydown(function(e){e.preventDefault(),t._keydownHandler(e)}),t.disabled&&(baidu(t.getElement("container")).addClass("magic-combobox-disable"),t.getElement("input").disabled=!0),t._initInput(),baidu(this.getElement("menu")).click(function(e){magic.control.ComboBox.globalActive=t.guid;var n=e.target;if(n==this)return;while(n.tagName!="LI")n=n.parentNode;t.$confirm(n),t.fire("clickitem",{result:t._getResult(n)})}),baidu(this.getElement("menu")).mouseover(function(e){t.$clearHighlight();var n=e.target;if(n==this)return;while(n.tagName!="LI")n=n.parentNode;t.$highlight(n)})}),t.on("show",function(){t._setViewSize()}),t.on("hide",function(){t.menufocusing=!1}),t.on("focus",function(){t.isFocus=!0}),t.on("blur",function(){t.isFocus=!1}),t.on("highlight",function(e){t.highlightIndex=e.index}),t.on("beforeshow",function(e){t._options.items.length==0&&(e.returnValue=!1)})},{type:"magic.control.ComboBox",superClass:magic.Base}).extend({_initInput:function(){var e=this._options.originIndex;this._options.readonly&&e==-1&&(e=0),e!=-1?this.$setByIndex(e):this.selectValue=this.getElement
("input").value=""},_setViewSize:function(){baidu(this.getElement("menu")).css("height","");var e=baidu(".magic-combobox-menu-item",this.getElement("menu"))[0].offsetHeight*this._options.viewSize,t=this.getElement("menu").offsetHeight,n=t>e?e:t;baidu(this.getElement("menu")).css("height",n)},_renderMenu:function(e){var t=this;e=e||this._options.items;var n=this.$menuContentToHTMLString(e);this.getElement("menu").innerHTML=n,baidu(t.menu.getElement()).addClass("magic-combobox-popup")},_keydownHandler:function(e){var t=38,n=40,r=13,i=baidu(".magic-combobox-menu-item",this.getElement("menu")),s=i.length;if(e.keyCode==r)this.menu.visible&&this.$confirm(i[this.highlightIndex]);else if(e.keyCode==n||e.keyCode==t)this.menu.visible||this.menu.show(),this.menufocusing||(this.menufocusing=!0,this.tempValue=this.getElement("input").value);e.keyCode==n?(this.$clearHighlight(),++this.highlightIndex==s?(this.highlightIndex=-1,this.getElement("input").value=this.tempValue,this.fire("pickOrigin",{content:this.tempValue})):this.$menufocus(i[this.highlightIndex])):e.keyCode==t&&(e.preventDefault(),this.$clearHighlight(),this.highlightIndex==-1&&(this.highlightIndex=s),--this.highlightIndex==-1?(this.getElement("input").value=this.tempValue,this.fire("pickOrigin",{content:this.tempValue})):this.$menufocus(i[this.highlightIndex]))},_getResult:function(e){return{value:baidu(e).attr("data-value"),index:baidu(e).attr("data-index"),content:baidu(e).text()}},_getValue:function(e){var t=this._options.items,n=t.length;while(n--)if(t[n].content==e)return t[n].value+"";return null},$pick:function(e){var t=this._getResult(e);return this.fire("beforepick")&&(this.getElement("input").value=t.content,this.fire("pick",{result:t})),t},$menufocus:function(e){this.$highlight(e);var t=this.$pick(e);return this.fire("menufocus",{result:t}),t},$confirm:function(e){var t=e?this.$pick(e):{result:this.tempValue};return this.menu.hide(),this.fire("confirm",{result:t}),this.selectValue!=t.value&&this.fire("change",{from:"confirm",result:t}),this.selectValue=t.value,t},$highlight:function(e){baidu(e).addClass("magic-combobox-menu-item-hover");var t=baidu(e).attr("data-index");this.fire("highlight",{index:t})},$clearHighlight:function(){var e=baidu(".magic-combobox-menu-item",this.getElement("menu"));e.removeClass("magic-combobox-menu-item-hover")},getValue:function(){return this.selectValue||this._getValue(this.getElement("input").value)||this.getElement("input").value},getSelectIndex:function(){for(var e=this._options.items,t=e.length;t--;)if(e[t].value+""===this.selectValue)return t;return-1},setByValue:function(e){for(var t=this._options.items,n=t.length;n--;)if(t[n].value==e){this.selectValue=e,this.getElement("input").value=t[n].content,this.select&&(this.select.options[n].selected=!0);break}},$setByIndex:function(e){var t=this._options.items[e]||this._options.items[0];this.getElement("input").value=t.content,this.selectValue=t.value,this.select&&(this.select.options[e].selected=!0)},focus:function(){this.isFocus||this.fire("focus")},blur:function(){if(this.isFocus){var e=this._getValue(this.getElement("input").value);e=e?e:this.getElement("input").value,e!=this.selectValue&&(this.fire("change",{from:"blur"}),this.selectValue=e),this.fire("blur")}},reset:function(){this._initInput();if(this.select){var e=this._options.originIndex==-1?0:this._options.originIndex;this.select.options[e].selected=!0}},reload:function(e){this._options.items=e,this._renderMenu(),this._initInput(),this.highlightIndex=-1,this.fire("reload",{data:e})},disable:function(){this.disabled||(baidu(this.getElement("container")).addClass("magic-combobox-disable"),this.getElement("input").disabled=!0,this.disabled=!0)},enable:function(){this.disabled&&(baidu(this.getElement("container")).removeClass("magic-combobox-disable"),this.getElement("input").disabled=!1,this.disabled=!1)},setWidth:function(e){this.width=e,baidu(this.getElement("container")).css("width",e),this.menu.setWidth(this.getElement("container").offsetWidth)},$dispose:function(){baidu(this.getElement("input-container")).off("click").off("keydown"),baidu(this.getElement("input")).off("keydown").off("keyup"),baidu(this.getElement("arrow")).off("click").off("keydown"),baidu(this.getElement("menu")).off("click").off("mouseover").off("mouseout"),this.menu.hide(),this.menu.$dispose(),baidu.array(magic.control.ComboBox.instanceArray).remove(this.guid),magic.Base.prototype.$dispose.call(this)}}),function(){function e(){var e=magic.control.ComboBox.globalActive;if(e!=null){var t=baiduInstance(e);t.focus()}var n=magic.control.ComboBox.instanceArray;if(n){for(var r=n.length;r--;){if(n[r]==e)continue;var i=baiduInstance(n[r]);if(i.isFocus){i.blur();break}}magic.control.ComboBox.globalActive=null}}magic.control.ComboBox.globalActive=null,baidu(document).click(e).keydown(e)}(),magic.ComboBox=baidu.lang.createClass(function(e){},{type:"magic.ComboBox",superClass:magic.control.ComboBox}).extend({$toHTMLString:function(){return['<div id="'+this.$getId("container")+'" class="magic-combobox">','<div id="'+this.$getId("input-container")+'" class="magic-combobox-input-container clearfix">','<div class="magic-combobox-input-outter">','<div class="magic-combobox-input-inner">','<input id="'+this.$getId("input")+'" class="magic-combobox-input"'+(this._options.readonly?"readonly":"")+">","</div>","</div>",'<a href="#" id="'+this.$getId("arrow")+'" class="magic-combobox-arrow" onclick="return false"></a>',"</div>","</div>"].join("")},_menuContainerToHTMLString:function(){return'<ul id="'+this.$getId("menu")+'" class="magic-combobox-menu"></ul>'},$menuContentToHTMLString:function(e){var t=[];return baidu(e).each(function(n,r){t.push('<li data-index="'+n+'" data-value="'+e[n].value+'" class="magic-combobox-menu-item">'+e[n].content+"</li>")}),t.join("")},render:function(e){baidu(e).append(this.$toHTMLString(this._options.items)),this.fire("load")},$dispose:function(){if(this.disposed)return;if(this.select)var e=this.select,t=e.parentNode;var n=this.getElement("container");magic.control.ComboBox.prototype.$dispose.call(this),baidu(n).remove(),e&&(t.parentNode.insertBefore(e,t),baidu(t).remove(),e.style.visibility="",e.style.width=""),n=null}}),baidu.dom.getAttr=function(e,t){return baidu.dom(baidu.dom.g(e)).attr(t)},baidu.dom.extend({before:function(){return baidu.check("^(?:string|function|HTMLElement|\\$DOM)(?:,(?:string|array|HTMLElement|\\$DOM))*$","baidu.dom.before"),baidu._util_.smartInsert(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}),this}}),function(){function e(e){var t=[],n=-1,r=e.options;return baidu.each(r,function(e,r){t.push({value:r.value,content:r.text}),r.selected&&(n=e)}),{items:t,originIndex:n}}magic.setup.comboBox=function(t,n){n=n||{};var t=baidu.dom(t).get(0),r=e(t),i=null;baidu.object.extend(r,{width:t.offsetWidth+10,disabled:t.disabled}),n=baidu.object.extend(r,n);var s=magic.setup(t,magic.ComboBox,n);baidu.dom(t).before('<span id="'+s.guid+'-host" class="magic-combobox-host"></span>');var o=baidu("#"+s.guid+"-host");return o.append(t),s.select=t,t.style.width=t.offsetWidth+15+"px",t.style.visibility="hidden",s.render(o,"afterBegin"),baidu(s.getElement("container")).addClass("magic-combobox-container-setup"),s.on("change",function(e){if(e.from=="confirm")e.result.index&&(t.options[e.result.index].selected=!0);else if(e.from=="blur"){var n=this.getElement("input").value;i||(i=document.createElement("OPTION"),i.selected=!0,t.add(i)),i.value=i.text=n}}),s.on("reload",function(e){var n=e.data,r=n.length,i=0;t.options.length=0;for(;i<r;i++){var s=document.createElement("OPTION");s.value=n[i].value,s.text=n[i].content,t.add(s)}}),s}}(),baidu.array.extend({filter:function(e,t){var n=baidu.array([]),r,i,s,o=0;if(baidu.type(e)==="function")for(r=0,i=this.length;r<i;r++)s=this[r],e.call(t||this,s,r,this)===!0&&(n[o++]=s);return n}}),baidu.array.filter=function(e,t,n){return baidu.isArray(e)?baidu.array(e).filter(t,n):[]},function(){var e=baidu.lang.createClass(function(e){var t=this;t._options=baidu.object.extend({circleTime:10,waitingTime:100,originValue:"",getValue:function(){return null}},e),t.previous=null,t.now="",t.fireTimer=0,t.timer=0,t.originValue=t._options.originValue,t.focusValue=null}).extend({_compare:function(e){if(!this.timer)return;e.now=e._options.getValue(),e.now==e.previous&&e.focusValue!=e.now&&e.now!=e.originValue?e.fireTimer==0&&(e.fireTimer=setTimeout(function(){e.fire("fire",{value:e.now})},e._options.waitingTime)):(clearTimeout(e.fireTimer),e.fireTimer=0,e.previous=e.now,e.now!=e.originValue&&(e.originValue=null),e.now!=e.focusValue&&(e.focusValue=null))},start:function(){var e=this;e.timer=setInterval(function(){e._compare(e)},e._options.circleTime)},stop:function(){clearInterval(this.timer),this.timer=null}});baidu.lang.register(magic.control.ComboBox,function(t){var n=this;n._options.suggestion=baidu.object.extend({enable:!0},t.suggestion);if(!n._options.suggestion.enable||n._options.readonly)return;this.on("load",function(){n.timer=new e({getValue:function(){return n.getElement("input").value},originValue:this.getElement("input").value}),n.timer.on("fire",function(e){if(e.value=="")n._renderMenu(),n.menu.show();else{var t=n._getMenuData(e.value);t.length>0?(n._renderMenu(t),n.menu.show()):n.menu.visible&&n.menu.hide()}}),n.timer.start()}),this.on("pick",function(e){n.timer.focusValue=e.result.content}),this.on("pickOrigin",function(e){n.timer.focusValue=e.content}),this.on("reload",function(e){n.timer.focusValue=this.getElement("input").value}),this.on("dispose",function(e){n.timer&&n.timer.stop()})},{_getMenuData:function(e){return baidu.array(this._options.items).filter(function(t,n){return t.content.indexOf(e)!=-1})}})}(),baidu.dom.getStyle=function(e,t){return baidu.dom(baidu.dom.g(e)).css(t)},baidu.page.getScrollLeft=function(){var e=document;return window.pageXOffset||e.documentElement.scrollLeft||e.body.scrollLeft},function(){baidu.page.getMousePosition=function(){return{x:baidu.page.getScrollLeft()+e.x,y:baidu.page.getScrollTop()+e.y}};var e={x:0,y:0};baidu.event.on(document,"onmousemove",function(t){t=window.event||t,e.x=t.clientX,e.y=t.clientY})}(),function(){function c(){e=!1,clearInterval(s),n.capture&&t.releaseCapture?t.releaseCapture():n.capture&&window.releaseEvents&&window.releaseEvents(Event.MOUSEMOVE|Event.MOUSEUP),document.body.style.MozUserSelect=l;var r=baidu.dom(document);r.off("selectstart",p),n.autoStop&&r.off("mouseup",c),baidu.isFunction(n.ondragend)&&n.ondragend(t,n,{left:a,top:f})}function h(l){if(!e){clearInterval(s);return}var c=n.range||[],h=baidu.page.getMousePosition(),p=o+h.x-r,d=u+h.y-i;baidu.isObject(c)&&c.length==4&&(p=Math.max(c[3],p),p=Math.min(c[1]-t.offsetWidth,p),d=Math.max(c[0],d),d=Math.min(c[2]-t.offsetHeight,d)),t.style.left=p+"px",t.style.top=d+"px",a=p,f=d,baidu.isFunction(n.ondrag)&&n.ondrag(t,n,{left:a,top:f})}function p(e){return baidu.event.preventDefault(e,!1)}var e=!1,t,n,r,i,s,o,u,a,f,l;baidu.dom.drag=function(d,v){if(!(t=baidu.dom.g(d)))return!1;n=baidu.object.extend({autoStop:!0,capture:!0,interval:16},v),a=o=parseInt(baidu.dom.getStyle(t,"left"))||0,f=u=parseInt(baidu.dom.getStyle(t,"top"))||0,e=!0,setTimeout(function(){var e=baidu.page.getMousePosition();r=n.mouseEvent?baidu.page.getScrollLeft()+n.mouseEvent.clientX:e.x,i=n.mouseEvent?baidu.page.getScrollTop()+n.mouseEvent.clientY:e.y,clearInterval(s),s=setInterval(h,n.interval)},1);var m=baidu.dom(document);return n.autoStop&&m.on("mouseup",c),m.on("selectstart",p),n.capture&&t.setCapture?t.setCapture():n.capture&&window.captureEvents&&window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP),l=document.body.style.MozUserSelect,document.body.style.MozUserSelect="none",baidu.isFunction(n.ondragstart)&&n.ondragstart(t,n),{stop:c,dispose:c,update:function(e){baidu.object.extend(n,e)}}}}(),baidu.page.getWidth=function(){var e=document,t=e.body,n=e.documentElement,r=e.compatMode=="BackCompat"?t:e.documentElement;return Math.max(n.scrollWidth,t.scrollWidth,r.clientWidth)},baidu.page.getHeight=function(){var e=document,t=e.body,n=e.documentElement,r=e.compatMode=="BackCompat"?t:e.documentElement;return Math.max(n.scrollHeight,t.scrollHeight,r.clientHeight)},magic.control.Dialog=baidu.lang.createClass(function(e){var t=this;e=baidu.object.extend({width:400,height:300,left:0,top:0,contentType:"html",draggable:!0},e||{}),baidu.object.extend(t._options||(t._options={}),e),t._footerHeight=0,e.width<100&&(e.width=100),e.height<100&&(e.height=100),this.zIndex=baidu.global.getZIndex("dialog",5),this.disposeProcess=[],this.on("load",function(){var e=this.getElement(),t=this,n=t._options;(typeof n.left=="number"||typeof n.top=="number")&&this.setPosition(n),(typeof n.width=="number"||typeof n.height=="number")&&this.setSize(this._options),this._isShown=!0,this.focus();var r=function(e){t.focus(e)};baidu(document).on("mousedown",r),this.disposeProcess.unshift(function(){baidu(document).off("mousedown",r)});if(n.draggable){var i=this.getElement("title"),s,o=baidu.fn.bind,t=this,u=e.parentNode,a=baidu(u).position();i.className+=" tang-title-dragable";var f={top:function(){var e=baidu(u).css("borderTopWidth");return/px/.test(e)?e=parseInt(e):e=0,u==document.body?0-e:0-(a.top+e)},right:function(){var t=baidu(".tang-background-inner",e)[0],n=baidu(t).css("marginLeft")=="auto"?t.offsetLeft+"px":baidu(t).css("marginLeft");return baidu.page.getWidth()+f.left()-parseInt(n)},bottom:function(){var t=baidu(".tang-background-inner",e)[0],n=baidu(t).css("marginTop")=="auto"?t.offsetTop+"px":baidu(t).css("marginTop");return baidu.page.getHeight()+f.top()-parseInt(n)},left:function(){var e=baidu(u).css("borderLeftWidth");return/px/.test(e)?e=parseInt(e):e=0,u==document.body?0-e:0-(a.top+e)}};baidu(i).on("mousedown",s=o(function(t){t.preventDefault(),baidu.dom.drag(e,{ondragstart:o(function(){this.fire("dragstart")},this),ondrag:o(function(){this.fire("drag")},this),ondragend:o(function(){this.fire("dragstop")},this),range:[f.top(),f.right(),f.bottom(),f.left()]})},this)),this.disposeProcess.unshift(function(){baidu(i).off("mousedown",s)})}}),this.on("resize",function(e,t){var n=this.getElement("titleText"),r=this.getElement("titleButtons");typeof t.width=="number"&&baidu(n).css("width",Math.max(0,t.width-r.clientWidth-20)+"px")})},{type:"magic.control.Dialog",superClass:magic.Base}),magic.control.Dialog.extend({isShowing:function(){return this._isShown},show:function(){if(this.fire("beforeshow")===!1)return this;this.getElement().style.display="",this._isShown=!0,this.fire("show")},hide:function(){if(this.fire("beforehide")===!1)return this;this._isShown=!1,this.getElement().style.display="none",this.fire("hide")},setTitleText:function(e){var t=this.getElement("titleText");return t.innerHTML=baidu.string.encodeHTML(e)||"&nbsp;",this},setContent:function(e,t){var n=this.getElement("content"),r,i,s;if(r=this._lastDom){s=r.parent;if(r.content===e)return this;r.target?s.insertBefore(r.content,r.target):s.appendChild(r.content),this._lastDom=null}switch(t){case"text":n.innerHTML=baidu.string.encodeHTML(e),baidu(n).removeClass("contentFrame");break;case"element":if(s=e.parentNode)s.insertBefore(i=document.createTextNode(""),e),this._lastDom={content:e,parent:e.parentNode,target:i};n.innerHTML="",n.appendChild(e);break;case"frame":baidu(n).css("height",baidu(this.getElement("body")).css("height")),n.innerHTML="<iframe frameborder='no' src='"+e+"'></iframe>",baidu(n).hasClass("contentFrame")||baidu(n).addClass("contentFrame");break;default:n.innerHTML=e,baidu(n).removeClass("contentFrame")}return this},focus:function(e){var t=baidu.global.get("dialogFocused").map,n=this.$getId()+"focus",r=function(){for(var e in t)e!=n&&(t[e]=!1)};t||(baidu.global.get("dialogFocused").map=t={});if(arguments.length){var i=e.target;baidu(i).closest(this.getElement()).size()>0?(baidu(this.getElement()).css("zIndex",this.zIndex=baidu.global.getZIndex("dialog",5)),t[n]!=1&&(this.fire("focus"),r(),t[n]=!0)):t[n]=!1}else baidu(this.getElement()).css("zIndex",this.zIndex=baidu.global.getZIndex("dialog",5)),t[n]=!0,r(),this.fire("focus")},setSize:function(e){var t=this.getElement("foreground");typeof e.width=="number"&&baidu(t).css("width",(this._options.width=e.width)+"px");if(typeof e.height=="number"){baidu(t).css("height",(this._options.height=e.height)+"px");var n=Math.max(0,this._options.height-this._titleHeight-this._footerHeight)+"px",r=baidu(this.getElement("content"));baidu(this.getElement("body")).css("height",n),r.hasClass("contentFrame")&&r.css("height",n)}this.fire("resize",e)},getSize:function(){return{width:this._options.width,height:this._options.height}},setPosition:function(e){typeof e.left=="number"&&baidu(this.getElement()).css("left",(this._options.left=e.left)+"px"),typeof e.top=="number"&&baidu(this.getElement()).css("top",(this._options.top=e.top)+"px"),this.fire("move",e)},getPosition:function(){return{left:this._options.left,top:this._options.top}},center:function(){var e=document[baidu.browser.isStrict?"documentElement":"body"],t=e.clientWidth,n=e.clientHeight,r=((t-this._options.width)/2|0)+baidu.page.getScrollLeft(),i=((n-this._options.height)/2|0)+baidu.page.getScrollTop();this.setPosition({left:r,top:i})},$dispose:function(){var e=baidu.global.get("dialogFocused").map;e&&delete e[this.$getId()+"focus"];for(var t=0,n=this.disposeProcess.length;t<n;t++)this.disposeProcess[t].call(this);magic.Base.prototype.$dispose.call(this)}}),baidu._util_.getDefaultDisplayValue=function(){var e={};return function(t){if(e[t])return e[t];var n=document.createElement(t),r,i,s;document.body.appendChild(n),r=baidu.dom(n).getCurrentStyle("display"),document.body.removeChild(n);if(r===""||r==="none")i=document.body.appendChild(document.createElement("iframe")),i.frameBorder=i.width=i.height=0,s=(i.contentWindow||i.contentDocument).document,s.writeln("<!DOCTYPE html><html><body>"),s.close(),n=s.appendChild(s.createElement(t)),r=baidu.dom(n).getCurrentStyle("display"),document.body.removeChild(i),i=null;return n=null,e[t]=r}}(),baidu.dom.extend({show:function(){var e=[],t,n;return this.each(function(r,i){if(!i.style)return;n=baidu.dom(i),t=i.style.display,e[r]=n.data("olddisplay"),!e[r]&&t==="none"&&(i.style.display=""),i.style.display===""&&baidu._util_.isHidden(i)&&n.data("olddisplay",e[r]=baidu._util_.getDefaultDisplayValue(i.nodeName))}),this.each(function(t,n){if(!n.style)return;if(n.style.display==="none"||n.style.display==="")n.style.display=e[t]||""})}}),baidu.object.isPlain=baidu.isPlainObject,baidu.fn.blank=function(){},baidu.page.getViewWidth=function(){var e=document,t=e.compatMode=="BackCompat"?e.body:e.documentElement;return t.clientWidth},magic.Dialog=baidu.lang.createClass(function(e){},{type:"magic.Dialog",superClass:magic.control.Dialog}),magic.Dialog.extend({render:function(e){var t=!0;baidu.type(e)==="string"&&(e="#"+e),e=baidu(e)[0],e||(document.body.appendChild(e=document.createElement("div")),t=!1);var n=magic.Dialog.template.join(""),r=this._options;baidu(e).addClass("tang-ui tang-dialog").css("display","block"),baidu(e).append(baidu.string.format(n,{content:"",titleId:this.$getId("title"),bodyId:this.$getId("body"),contentId:this.$getId("content"),foregroundId:this.$getId("foreground"),footerId:this.$getId("footer"),footerContainerId:this.$getId("footerContainer")})),this._background=new magic.Background({coverable:!0}),this._background.render(e),this.$mappingDom("",e),this._renderHeader(),this._titleHeight=this.getElement("title").offsetHeight||30,baidu(this.getElement("footer")).hide(),this.fire("footer"),this.setSize(r),this.setPosition(r),r.content&&this.setContent(r.content,r.contentType),this.fire("load"),this.show(),this.disposeProcess.push(function(){baidu(this.getElement("closeBtn")).off("click",this._closeBtnFn),this._background.$dispose(),e.innerHTML="",baidu(e).removeClass("tang-ui tang-dialog"),t||document.body.removeChild(e)})},_renderHeader:function(){var e=["<div class='buttons' id='",this.$getId("titleButtons"),"'>","<a id='",this.$getId("closeBtn"),"' class='close-btn' href='' onmousedown='event.stopPropagation && event.stopPropagation(); event.cancelBubble = true; return false;' onclick='return false;'></a>","</div>","<span id='",this.$getId("titleText"),"'>",baidu.string.encodeHTML(this._options.titleText||"")||"&nbsp;","</span>"];baidu(this.getElement("title")).append(e.join("")),baidu(this.getElement("closeBtn")).on("click",this._closeBtnFn=baidu.fn.bind(this.hide,this))}}),magic.Dialog.template=["<div class='tang-foreground' id='#{foregroundId}'>","<div class='tang-title' id='#{titleId}'>","</div>","<div class='tang-body' id='#{bodyId}'>","<div class='tang-content' id='#{contentId}'>#{content}</div>","</div>","<div class='tang-footer' id='#{footerId}'>","<div id='#{footerContainerId}'></div>","</div>","</div>"],baidu.lang.register(magic.control.Dialog,function(e){e&&e.buttons&&e.buttons.enable&&this.on("footer",function(){this.buttons=null,baidu(this.getElement("footer")).show(),this._createButton(e.buttons),baidu(this.getElement("footerContainer")).addClass("tang-footerContainer");var t=this.getElement("footer").offsetHeight;(!this.buttons||this.buttons.length==0)&&(t=30)&&baidu(this.getElement("footer")).css("height",30),this._footerHeight=t})},{_createButton:function(){var e=this,t=arguments.length>0?arguments[0]:{},n=baidu(e.getElement("footerContainer")),r=e.buttons||(e.buttons=[]),i=!1,s=function(){var e=['<a href="#" onClick="return false;" class="tang-dialog-button ',"",'">','<span class="tang-dialog-button-s">','<span class="tang-dialog-button-s-space">&nbsp;</span>','<span class="tang-dialog-button-s-text">',"","</span>","</span>","</a>"];return function(t,n){return t.disabled?e[1]="tang-dialog-button-disabled":e[1]="",e[6]=t.text||"&nbsp;",baidu(n).append(e.join("")),baidu(n).children().get(0)}}();baidu.forEach(t.items||[],function(t,o){var u,a;n.append(a=baidu('<span class="tang-dialog-button-carrier"></span>')[0]),a=typeof t=="object"?(t.builder||s).call(this,t,a,e,o):t,!i&&t.focused&&!t.disabled&&(i=!0)&&a.focus(),r.push(a),t.disabled||t.click&&baidu(a).on("click",u=function(){t.click.call(this,e)}),u&&this.disposeProcess.push(function(){baidu(a).off("click",u)})},e),n.addClass("tang-button-"+(t.align||"right"))}}),function(){function t(){for(var t=0,n=e.length;t<n;t++)e[t]();e=[]}function n(){function r(){n.style.display="none",baidu(n).css("height",baidu.page.getViewHeight()+"px"),baidu(n).css("width",baidu.page.getViewWidth()+"px"),n.style.display=""}function i(){n.style.display="none",baidu(n).css("top",baidu.page.getScrollTop()+"px"),baidu(n).css("left",baidu.page.getScrollLeft()+"px"),n.style.display=""}var t=baidu.browser.ie,n=document.createElement("div");n.className="tang-mask",t==6&&baidu(n).css("position","absolute"),baidu(n).css("zIndex",baidu.global.getZIndex("dialog",-5)),document.body.appendChild(n),r(),t==6&&i(),baidu(window).on("resize",r),e.push(function(){baidu(window).off("resize",r)}),t==6&&baidu(window).on("scroll",i),t==6&&e.push(function(){baidu(window).off("scroll",i)}),e.push(function(){document.body.removeChild(n)})}var e=[];magic.Dialog.alert=function(){var r={},i={width:360,height:140,titleText:"",content:"",buttons:{enable:!0,items:[r]}},s={},o,u,a,f;baidu.object.isPlain(arguments[0])?s=arguments[0]:(arguments[0]&&(s.content=arguments[0]),arguments[1]&&(s.titleText=arguments[1]),arguments[2]&&(s.ok=arguments[2])),baidu.object.isPlain(s.ok)?(r.text=s.ok.label,o=s.ok.callback):(r.text=baidu.i18n.cultures[baidu.i18n.currentLocale].language.ok,o=s.ok),o||(o=baidu.fn.blank),s.ok=null,delete s.ok,baidu.object.extend(i,s||{});var l=new magic.Dialog(i);return r.click=function(){t(),o.call(l)},l.render(),l.center(),f=baidu("#"+l.$getId()),baidu(l.getElement("closeBtn")).on("click",u=function(){t(),o.call(l)}),e.push(function(){baidu(l.getElement("closeBtn")).off("click",u)}),baidu(document).on("keydown",a=function(e){e=e||window.event;switch(e.keyCode){case 27:r.click();break;case 13:e.preventDefault(),e.stopPropagation(),r.click();break;default:}}),e.push(function(){baidu(document).off("keydown",a)}),e.push(function(){l.$dispose()}),n(),l},magic.alert=magic.Dialog.alert,magic.Dialog.confirm=function(){var r={},i={},s={width:360,height:140,titleText:"",content:"",buttons:{enable:!0,items:[r,i]}},o={},u,a,f,l;baidu.object.isPlain(arguments[0])?o=arguments[0]:(arguments[0]&&(o.content=arguments[0]),arguments[1]&&(o.titleText=arguments[1]),arguments[2]&&(o.ok=arguments[2]),arguments[3]&&(o.cancel=arguments[3])),baidu.object.isPlain(o.ok)?(r.text=o.ok.label,u=o.ok.callback):(r.text=baidu.i18n.cultures[baidu.i18n.currentLocale].language.ok,u=o.ok),baidu.object.isPlain(o.cancel)?(i.text=o.cancel.label,a=o.cancel.callback):(i.text=baidu.i18n.cultures[baidu.i18n.currentLocale].language.cancel,a=o.cancel),u||(u=baidu.fn.blank),o.ok=null,delete o.ok,a||(a=baidu.fn.blank),o.cancel=null,delete o.cancel,baidu.object.extend(s,o||{});var c=new magic.Dialog(s);r.click=function(){u.call(c),t()},i.click=function(){a.call(c),t()},c.render(),c.center();var h=baidu("#"+c.$getId());return baidu(c.getElement("closeBtn")).on("click",f=function(){t(),a.call(c)}),e.push(function(){baidu(c.getElement("closeBtn")).off("click",f)}),baidu(document).on("keydown",l=function(e){e=e||window.event;switch(e.keyCode){case 27:i.click();break;case 13:e.preventDefault(),e.stopPropagation(),r.click();break;default:}}),e.push(function(){baidu(document).off("keydown",l)}),e.push(function(){c.$dispose()}),n(),c},magic.confirm=magic.Dialog.confirm}(),magic.setup.background=function(e,t){var n=t||{},r=magic.setup(baidu.dom(e).get(0)||e,magic.Background,n),i=r.getElement(),s=i.style,o=i.parentNode;return s.top="0px",s.left="0px",s.width=r.timer?"10px":"100%",s.height=r.timer?"10px":"100%",s.position="absolute",s.zIndex=-9,r.coverable&&baidu.dom(i).append(r._coverDom||""),o!=document.body&&baidu.dom(o).css("position")=="static"&&(o.style.position="relative"),r},magic.setup.dialog=function(e,t){baidu.type(e)==="string"&&(e="#"+e),e=baidu(e)[0];var n=t||{},r=magic.setup(e,magic.control.Dialog,n),i=r.getElement(),s=e.childNodes,o;for(var u=0,a=s.length;u<a;u++)if(s[u].nodeType!=3&&~s[u].className.indexOf("tang-background")){magic.setup.background(s[u],{coverable:!0});break}r.$mappingDom("title",baidu(".tang-title",i)[0]),r.$mappingDom("titleText",baidu("span",r.getElement("title"))[0]),r.$mappingDom("titleButtons",baidu(".buttons",r.getElement("title"))[0]),r.$mappingDom("body",baidu(".tang-body",i)[0]),r.$mappingDom("content",baidu(".content",r.getElement("body"))[0]),r.$mappingDom("closeBtn",baidu(".close-btn",r.getElement("title"))[0]),r.$mappingDom("foreground",baidu(".tang-foreground",i)[0]),r.$mappingDom("footer",(o=baidu(".tang-footer",i))[0]),r.$mappingDom("footerContainer",o.children()[0]),o.hide(),r._titleHeight=r.getElement("title").offsetHeight||30,r.fire("footer");var f=r._options;return typeof n.left=="undefined"&&(f.left=baidu(i).css("left")=="auto"?0:baidu(i).css("left")),typeof n.top=="undefined"&&(f.top=baidu(i).css("top")=="auto"?0:baidu(i).css("top")),typeof f.width!="number"&&(f.width=i.clientWidth),typeof f.height!="number"&&(f.height=i.clientHeight),f.width<100&&(f.width=100),f.height<100&&(f.height=100),r.fire("load"),r.show(),f.titleText&&r.setTitleText(f.titleText),f.content&&r.setContent(f.content,f.contentType||"html"),r},magic.Mask=function(e){function i(){if(t.container==document.body){var e=t.getElement().style;e.display="none",t.setSize([baidu.page.getViewWidth(),baidu.page.getViewHeight()]),e.display=""}}function s(){if(t.container==document.body){var e=t.getElement().style;e.display="none",e.top=baidu.page.getScrollTop()+"px",e.left=baidu.page.getScrollLeft()+"px",e.display=""}}function o(e){var t=document.getElementsByTagName("object"),n=e?"visible":"hidden";for(var r=0,i,s=t.length;r<s;r++)i=t[r],i.style.visibility=n}var t=this;magic.control.Layer.call(this),t.zIndex=999,t.opacity=.3,t.bgColor="#000000",t.coverable=!1,t.container=document.body,baidu.object.extend(t,e||{});var n=baidu.browser.safari,r=baidu.browser.ie;baidu.dom(t.container).prepend(t.toHTMLString()),r==6&&(t.getElement().style.position="absolute"),t.on("show",function(){i(),r==6&&s(),baidu.dom(window).on("resize",i),r==6&&baidu.dom(window).on("scroll",s);var e=t.getElement().style;e.opacity=t.opacity,e.zIndex=t.zIndex,e.filter="alpha(opacity="+t.opacity*100+")",e.backgroundColor=t.bgColor,n&&o(!1)}),t.on("hide",function(){baidu.dom(window).off("resize",i),r==6&&baidu.dom(window).off("scroll",s),n&&o(!0)})},baidu.lang.inherits(magic.Mask,magic.control.Layer,"magic.Mask").extend({toHTMLString:function(){return"<div id='"+this.$getId()+"' style='top:0px; left:0px; position:fixed; display:none;'>"+"<iframe frameborder='0' style='filter:progid:DXImageTransform.Microsoft.Alpha(opacity:0);position:absolute;top:0px;left:0px;width:100%;height:100%;z-index:-1' src='about:blank'></iframe><div style='position:absolute;top:0px;left:0px;width:100%;height:100%;z-index:-1;'>&nbsp;</div>"+"</div>"},$dispose:function(){var e=this.getElement();this.fire("hide"),e.parentNode.removeChild(e)}}),baidu.lang.register(magic.control.Dialog,function(e){e&&e.mask&&e.mask.enable&&(this.renderMask(),this.on("load",function(){this._options.left||this.center()}),this.on("show",function(){this.showMask()}),this.on("hide",function(){this.hideMask()}),this.disposeProcess.push(function(){this._mask.$dispose()}))},{renderMask:function(){if(this._mask)return this;var e=this._options.mask;return this._mask=new magic.Mask({opacity:e.opacity||.15,bgColor:e.bgColor||"#000",zIndex:this.zIndex-1}),this},showMask:function(){return this._mask.show(),this},hideMask:function(){return this._mask.hide(),this}}),baidu.event.stopPropagation=function(e){return(new baidu.event(e)).stopPropagation()},magic.control.Slider=baidu.lang.createClass(function(e){var t=this,n=t._info=baidu.object.extend({accuracy:0,_status:"enable"},e),r=n._isVertical=n.orientation=="vertical";n.direction=="backward"&&(n._oppsite=!0),baidu.object.extend(n,{_suffix:r?"vtl":"htl",_knobKey:r?"top":"left",_mouseKey:r?"y":"x",_accuracyKey:r?"height":"width"}),t.on("load",function(){var e=t.getElement("view"),r=t.getElement("inner"),i=["mousedown","click"],s=baidu.fn.bind(t._eventControl,t),o=n._accuracyKey;n._val="offset"+o.replace(/([a-z])([a-z]*)/,function(e,t,n){return t.toUpperCase()+n}),n.width=e.clientWidth,n.height=e.clientHeight,n._range=[0,n[o]],n._limit=r[n._val],n._const=(n._range[1]-n._limit)/2,baidu(i).each(function(t,n){baidu.dom(e).on(n,s)}),t.on("dispose",function(){baidu(i).each(function(t,n){baidu.dom(e).off(n,s)})}),t._setAccuracy(n.accuracy),t.setValue(n.currentValue)})},{type:"magic.control.Slider",superClass:magic.Base}),magic.control.Slider.extend({disable:function(){this._info._status="disabled"},enable:function(){this._info._status="enable"},setValue:function(e){var t=this,n=t._info,r=n._accuracyKey,e=e||0,i=n[r]*e;n._oppsite&&(i=n[r]*t._accSub(1,e)),t._setPosition({target:null,noAccuracy:!0,noFx:!0},i),n.currentValue=e},getValue:function(){return this._info.currentValue},setRange:function(e){var t=this,n=t._info,r=n[n._accuracyKey],i=e*r;if(n.accuracy)return;n._oppsite?n._range[0]=i:n._range[1]=i,n._percent=i/r},$dispose:function(){var e=this;if(e.disposed)return;magic.Base.prototype.$dispose.call(e)},_accSub:function(e,t){var n,r,i,s;try{n=e.toString().split(".")[1].length}catch(o){n=0}try{r=t.toString().split(".")[1].length}catch(o){r=0}return i=Math.pow(10,Math.max(n,r)),s=n>=r?n:r,+((e*i-t*i)/i).toFixed(s)},_startDrag:function(e){var t=this,n=t._info,r=t.getElement("knob"),i=t.getElement("process"),s=n.accuracy,o=n.width,u=n.height,a=0,f=0,l=r[n._val],c=n._range,h=[],p=parseInt(baidu.dom(r).css("margin-"+n._knobKey));e.stopPropagation(),n._isVertical?(u=c[1]+l,a=c[0]):(o=c[1]+l,f=c[0]),h=[a,o,u,f];if(e.target!=r||t._isMoving)return;t._recover(),baidu.dom.drag(r,{range:h,fix:[n._knobKey,p],ondragstart:function(){t.fire("onslidestart")},ondrag:function(){var e=t._getRealPos(r,n._knobKey);baidu.dom(i).css(n._accuracyKey,t._getProcessPos(e)),t._setCurrentValue(e),t.fire("onslide"),t.fire("onchange",{value:n.currentValue})},ondragend:function(e,r,i){i=i[n._knobKey],t._reset(i),s&&t._useAdsorbr(i),t.fire("onslidestop")}})},_resize:function(){var e=this,t=e._info,n=isNaN(Math.min(t._percent,1))?1:Math.min(t._percent,1),r=e.getElement("inner"),i=e.getElement("view"),s;t.width=i.clientWidth,t.height=i.clientHeight,t._limit=r[t._val],s=t[t._accuracyKey],t._oppsite?t._range=n<1?[s*n,s]:[0,s]:t._range=[0,s*n],e._setAccuracy(t.accuracy)},_recover:function(){var e=this,t=e._info,n=e.getElement("knob"),r=e.getElement("process"),i=t._accuracyKey,s=n.style[t._knobKey],o=r.style[i];if(/px|auto/
.test(s))return;s.length||(s=0),o.length||(o=0),s=parseFloat(s)/100*t[i]+"px",o=parseFloat(o)/100*t._limit+"px",baidu.dom(n).css(t._knobKey,s),baidu.dom(r).css(i,o)},_reset:function(e){var t=this,n=t._info,r=t.getElement("knob"),i=t.getElement("process");if(/%/.test(e))return;baidu.dom(r).css(n._knobKey,t._knobPercent(e)),baidu.dom(i).css(n._accuracyKey,t._processPercent(t._getProcessPos(e)))},_knobPercent:function(e){var t=this._info;return parseFloat(e)/t[t._accuracyKey]*100+"%"},_processPercent:function(e){return this._info._limit==0?"0":parseFloat(e)/this._info._limit*100+"%"},_getRealPos:function(e,t){return e.style[t]},_getProcessPos:function(e){var t=this,n=t._info,r=n._range,i=n._limit,e=parseFloat(e)-n._const;if(r[0]&&e<r[0]){var s=r[0]-n._const;return s>0?s+"px":0}return e>r[1]?r[1]-n._const+"px":(e<0&&(e=0),e>i&&(e=i),n._oppsite&&(e=i-e),e+"px")},_getKnobPos:function(e){var e=parseFloat(e),t=this._info,n=t._range;return t._oppsite?e=e<n[0]?n[0]:e:e=e>n[1]?n[1]:e,e+"px"},_getMousePos:function(){var e=this.getElement("view"),t=baidu.page.getMousePosition(),n=baidu.dom(e).offset();return this._info._mouseKey=="x"?t.x-n.left:t.y-n.top},_move:function(e,t,n){var r=this,i=r._info,s=i._range,o=r._getKnobPos(n),u=r._getProcessPos(n);r._setCurrentValue(o),baidu.dom(e).css(i._knobKey,r._knobPercent(o)),baidu.dom(t).css(i._accuracyKey,r._processPercent(u))},_setCurrentValue:function(e){var t=this,n=t._info,r=parseFloat(e)*10/(n[n._accuracyKey]*10);n._oppsite&&(r=t._accSub(1,r)),n.currentValue=r},_slide:function(e,t,n){var r=this,i=r._info,s=r.getElement("knob"),o=r.getElement("process");r.fire("startFx",{knob:s,process:o,pos:e,fn:t})&&(r._move(s,o,e),t&&t())},_setPosition:function(e,t,n){var r=this,i=r._info,s=r.getElement("knob"),o=r.getElement("process"),u=e.noAccuracy||!i.accuracy,a=function(e){r._isMoving=!1,r.fire("onchange",{value:i.currentValue})};t==n&&(t=r._getMousePos());if(e.target===s)return;r._isMoving=!0,u?r._slide(t,a,e.noFx):r._useAdsorbr(t,a,e.noFx)},_useAdsorbr:function(e,t,n){var r=this,i=r._info,e=parseFloat(e)||0,s=i._range,o=i._accuracyZone.slice(0),u=o.length,a=0,f=e,l;if(e==0||e>s[1])l=e;else if(i.accuracy)for(;a<u;a++){var c=Math.abs(o[a]-e);c<=f&&(f=c,l=o[a])}else l=e;r._slide(l,t,n)},_setAccuracy:function(e){var t=this._info,n=t._range,r=t._accuracyKey,i=e*t[r],s=0,o=[0],u;e==0&&(t.accuracy=0,delete t._accuracyZone),t.accuracy=e;while((u=s+i)&&u<n[1])s=u,o.push(u);t._accuracyZone=o.concat(t[r])},_eventControl:function(e){var t=this,n=t.getElement("knob"),r=t.getElement("process");e.preventDefault(),t._resize(),t._info._status=="enable"&&(e.target==n&&e.type=="mousedown"?t._startDrag(e):e.type=="mousedown"&&t.fire("onbeforeslideclick")&&(t._setPosition(e),t.fire("onslideclick")))}}),baidu.event.stopPropagation=function(e){return(new baidu.event(e)).stopPropagation()},magic.control.Slider=baidu.lang.createClass(function(e){var t=this,n=t._info=baidu.object.extend({accuracy:0,_status:"enable"},e),r=n._isVertical=n.orientation=="vertical";n.direction=="backward"&&(n._oppsite=!0),baidu.object.extend(n,{_suffix:r?"vtl":"htl",_knobKey:r?"top":"left",_mouseKey:r?"y":"x",_accuracyKey:r?"height":"width"}),t.on("load",function(){var e=t.getElement("view"),r=t.getElement("inner"),i=["mousedown","click"],s=baidu.fn.bind(t._eventControl,t),o=n._accuracyKey;n._val="offset"+o.replace(/([a-z])([a-z]*)/,function(e,t,n){return t.toUpperCase()+n}),n.width=e.clientWidth,n.height=e.clientHeight,n._range=[0,n[o]],n._limit=r[n._val],n._const=(n._range[1]-n._limit)/2,baidu(i).each(function(t,n){baidu.dom(e).on(n,s)}),t.on("dispose",function(){baidu(i).each(function(t,n){baidu.dom(e).off(n,s)})}),t._setAccuracy(n.accuracy),t.setValue(n.currentValue)})},{type:"magic.control.Slider",superClass:magic.Base}),magic.control.Slider.extend({disable:function(){this._info._status="disabled"},enable:function(){this._info._status="enable"},setValue:function(e){var t=this,n=t._info,r=n._accuracyKey,e=e||0,i=n[r]*e;n._oppsite&&(i=n[r]*t._accSub(1,e)),t._setPosition({target:null,noAccuracy:!0,noFx:!0},i),n.currentValue=e},getValue:function(){return this._info.currentValue},setRange:function(e){var t=this,n=t._info,r=n[n._accuracyKey],i=e*r;if(n.accuracy)return;n._oppsite?n._range[0]=i:n._range[1]=i,n._percent=i/r},$dispose:function(){var e=this;if(e.disposed)return;magic.Base.prototype.$dispose.call(e)},_accSub:function(e,t){var n,r,i,s;try{n=e.toString().split(".")[1].length}catch(o){n=0}try{r=t.toString().split(".")[1].length}catch(o){r=0}return i=Math.pow(10,Math.max(n,r)),s=n>=r?n:r,+((e*i-t*i)/i).toFixed(s)},_startDrag:function(e){var t=this,n=t._info,r=t.getElement("knob"),i=t.getElement("process"),s=n.accuracy,o=n.width,u=n.height,a=0,f=0,l=r[n._val],c=n._range,h=[],p=parseInt(baidu.dom(r).css("margin-"+n._knobKey));e.stopPropagation(),n._isVertical?(u=c[1]+l,a=c[0]):(o=c[1]+l,f=c[0]),h=[a,o,u,f];if(e.target!=r||t._isMoving)return;t._recover(),baidu.dom.drag(r,{range:h,fix:[n._knobKey,p],ondragstart:function(){t.fire("onslidestart")},ondrag:function(){var e=t._getRealPos(r,n._knobKey);baidu.dom(i).css(n._accuracyKey,t._getProcessPos(e)),t._setCurrentValue(e),t.fire("onslide"),t.fire("onchange",{value:n.currentValue})},ondragend:function(e,r,i){i=i[n._knobKey],t._reset(i),s&&t._useAdsorbr(i),t.fire("onslidestop")}})},_resize:function(){var e=this,t=e._info,n=isNaN(Math.min(t._percent,1))?1:Math.min(t._percent,1),r=e.getElement("inner"),i=e.getElement("view"),s;t.width=i.clientWidth,t.height=i.clientHeight,t._limit=r[t._val],s=t[t._accuracyKey],t._oppsite?t._range=n<1?[s*n,s]:[0,s]:t._range=[0,s*n],e._setAccuracy(t.accuracy)},_recover:function(){var e=this,t=e._info,n=e.getElement("knob"),r=e.getElement("process"),i=t._accuracyKey,s=n.style[t._knobKey],o=r.style[i];if(/px|auto/.test(s))return;s.length||(s=0),o.length||(o=0),s=parseFloat(s)/100*t[i]+"px",o=parseFloat(o)/100*t._limit+"px",baidu.dom(n).css(t._knobKey,s),baidu.dom(r).css(i,o)},_reset:function(e){var t=this,n=t._info,r=t.getElement("knob"),i=t.getElement("process");if(/%/.test(e))return;baidu.dom(r).css(n._knobKey,t._knobPercent(e)),baidu.dom(i).css(n._accuracyKey,t._processPercent(t._getProcessPos(e)))},_knobPercent:function(e){var t=this._info;return parseFloat(e)/t[t._accuracyKey]*100+"%"},_processPercent:function(e){return this._info._limit==0?"0":parseFloat(e)/this._info._limit*100+"%"},_getRealPos:function(e,t){return e.style[t]},_getProcessPos:function(e){var t=this,n=t._info,r=n._range,i=n._limit,e=parseFloat(e)-n._const;if(r[0]&&e<r[0]){var s=r[0]-n._const;return s>0?s+"px":0}return e>r[1]?r[1]-n._const+"px":(e<0&&(e=0),e>i&&(e=i),n._oppsite&&(e=i-e),e+"px")},_getKnobPos:function(e){var e=parseFloat(e),t=this._info,n=t._range;return t._oppsite?e=e<n[0]?n[0]:e:e=e>n[1]?n[1]:e,e+"px"},_getMousePos:function(){var e=this.getElement("view"),t=baidu.page.getMousePosition(),n=baidu.dom(e).offset();return this._info._mouseKey=="x"?t.x-n.left:t.y-n.top},_move:function(e,t,n){var r=this,i=r._info,s=i._range,o=r._getKnobPos(n),u=r._getProcessPos(n);r._setCurrentValue(o),baidu.dom(e).css(i._knobKey,r._knobPercent(o)),baidu.dom(t).css(i._accuracyKey,r._processPercent(u))},_setCurrentValue:function(e){var t=this,n=t._info,r=parseFloat(e)*10/(n[n._accuracyKey]*10);n._oppsite&&(r=t._accSub(1,r)),n.currentValue=r},_slide:function(e,t,n){var r=this,i=r._info,s=r.getElement("knob"),o=r.getElement("process");r.fire("startFx",{knob:s,process:o,pos:e,fn:t})&&(r._move(s,o,e),t&&t())},_setPosition:function(e,t,n){var r=this,i=r._info,s=r.getElement("knob"),o=r.getElement("process"),u=e.noAccuracy||!i.accuracy,a=function(e){r._isMoving=!1,r.fire("onchange",{value:i.currentValue})};t==n&&(t=r._getMousePos());if(e.target===s)return;r._isMoving=!0,u?r._slide(t,a,e.noFx):r._useAdsorbr(t,a,e.noFx)},_useAdsorbr:function(e,t,n){var r=this,i=r._info,e=parseFloat(e)||0,s=i._range,o=i._accuracyZone.slice(0),u=o.length,a=0,f=e,l;if(e==0||e>s[1])l=e;else if(i.accuracy)for(;a<u;a++){var c=Math.abs(o[a]-e);c<=f&&(f=c,l=o[a])}else l=e;r._slide(l,t,n)},_setAccuracy:function(e){var t=this._info,n=t._range,r=t._accuracyKey,i=e*t[r],s=0,o=[0],u;e==0&&(t.accuracy=0,delete t._accuracyZone),t.accuracy=e;while((u=s+i)&&u<n[1])s=u,o.push(u);t._accuracyZone=o.concat(t[r])},_eventControl:function(e){var t=this,n=t.getElement("knob"),r=t.getElement("process");e.preventDefault(),t._resize(),t._info._status=="enable"&&(e.target==n&&e.type=="mousedown"?t._startDrag(e):e.type=="mousedown"&&t.fire("onbeforeslideclick")&&(t._setPosition(e),t.fire("onslideclick")))}}),magic.Slider=baidu.lang.createClass(function(e){},{type:"magic.Slider",superClass:magic.control.Slider}),magic.Slider.extend({render:function(e){var t=this;e=baidu.dom("#"+e).get(0),e||document.body.appendChild(e=document.createElement("div"));if(/tang-slider/.test(e.className))return;baidu.dom(e).addClass("tang-ui tang-slider tang-slider-"+t._info._suffix),e.innerHTML=t.toHTMLString(),t.$mappingDom("",e),t.fire("load")},toHTMLString:function(){var e=this,t=e._info,n="tang-process-"+t.direction,r=t._oppsite?"-backward":"",i=baidu.string.format(magic.Slider.template,{id:e.$getId(),viewId:e.$getId("view"),innerId:e.$getId("inner"),cornerClass:r,processId:e.$getId("process"),processClass:n,knobId:e.$getId("knob")});return i},$dispose:function(){var e=this,t;if(e.disposed)return;t=e.getElement(""),magic.Base.prototype.$dispose.call(e),baidu.dom(t).remove(),t=null}}),magic.Slider.template='<div id="#{viewId}" class="tang-view"><div class="tang-content"><div class="tang-corner tang-start#{cornerClass}"></div><div class="tang-corner tang-last#{cornerClass}"></div><div id="#{innerId}" class="tang-inner"><div id="#{processId}" class="tang-process #{processClass}"></div></div></div><a id="#{knobId}" href="javascript:;" class="tang-knob"></a></div>',magic.setup.slider=function(e,t){var n=magic.setup(baidu.dom("#"+e).get(0),magic.control.Slider,t),r=n.getElement();return n.$mappingDom("view",baidu(".tang-view",r)[0]),n.$mappingDom("knob",baidu(".tang-knob",r)[0]),n.$mappingDom("process",baidu(".tang-process",r)[0]),n.$mappingDom("inner",baidu(".tang-inner",r)[0]),n.fire("load"),n},baidu.lang.register(magic.control.Slider,function(e){var t=this,n=t._info;n.cache&&n.cache.enable&&t.on("load",function(){var e=t.getElement("inner"),r=n._accuracyKey,i=n._oppsite?"tang-cache-backward":"tang-cache-forward",s=t.$getId("cache"),o=n._oppsite?'<div id="#{id}" class="tang-cache #{cacheClass}"><div class="tang-cache-corner tang-cache-start"></div>':'<div id="#{id}" class="tang-cache #{cacheClass}"><div class="tang-cache-corner tang-cache-last"></div>';baidu.dom(e).prepend(baidu.string.format(o,{id:s,cacheClass:i}))})},{setCache:function(e){var t=this,n=t._info,r=t.getElement("cache"),i=e*n._limit,s=t._cachePercent(i);e==0?baidu.dom(r).css("overflow","hidden"):baidu.dom(r).css("overflow",""),baidu.dom(r).css(n._accuracyKey,t._cachePercent(i))},_cachePercent:function(e){return e/this._info._limit*100+"%"}}),baidu.fx.move=function(e,t){if(!(e=baidu.dom.g(e))||baidu.dom.getStyle(e,"position")=="static")return null;t=baidu.object.extend({x:0,y:0},t||{});if(t.x==0&&t.y==0)return null;var n=baidu.fx.create(e,baidu.object.extend({initialize:function(){this.protect("top"),this.protect("left"),this.originX=parseInt(baidu.dom.getStyle(e,"left"))||0,this.originY=parseInt(baidu.dom.getStyle(e,"top"))||0},transition:function(e){return 1-Math.pow(1-e,2)},render:function(t){e.style.top=this.y*t+this.originY+"px",e.style.left=this.x*t+this.originX+"px"}},t),"baidu.fx.move");return n.launch()},baidu.fx.moveTo=function(e,t,n){if(!(e=baidu.dom.g(e))||baidu.dom.getStyle(e,"position")=="static"||typeof t!="object")return null;var r=[t[0]||t.x||0,t[1]||t.y||0],i=parseInt(baidu.dom.getStyle(e,"left"))||0,s=parseInt(baidu.dom.getStyle(e,"top"))||0,o=baidu.fx.move(e,baidu.object.extend({x:r[0]-i,y:r[1]-s},n||{}));return o},baidu.lang.register(magic.control.Slider,function(e){var t=this,n=t._info.fx;t.on("startFx",function(e){n&&n.enable&&(t._fx&&t._fx.end(),t._recover(),t._fxMove(e.knob,e.process,e.pos,e.fn),e.returnValue=!1)})},{setValue:function(e,t){var n=this,r=n._info,i=r._accuracyKey,e=e||0,s=r[i]*e;r._oppsite&&(s=r[i]*n._accSub(1,e)),n._setPosition({target:null,noAccuracy:!0,noFx:t},s),r.currentValue=e},_fxMove:function(e,t,n,r){var i=this,s=i._info,o=s.fx,u=s._knobKey,a=s._accuracyKey,n=parseFloat(i._getKnobPos(n)),f=s._isVertical?[0,n]:[n,0];i._setCurrentValue(n),i._fx=baidu.fx.moveTo(e,f,{duration:o.duration||200,onbeforestart:function(){i.fire("onfxstart")},onafterupdate:function(){var n=i._getProcessPos(i._getRealPos(e,u));baidu.dom(t).css(a,n),i.fire("onfx")},onafterfinish:function(){i.fire("onfxstop"),i._reset(n),r&&r(n),delete i._fx}})||r&&r()}}),magic.control.Tab=baidu.lang.createClass(function(e){var t=this,n=baidu.fn.bind("_toggleHandler",t);t._options=baidu.object.extend({selectEvent:"click",selectDelay:0,originalIndex:0},e),t._selectedIndex=t._options.originalIndex,t.on("onload",function(e){var r=t.getElement();t.$mappingDom("title",baidu(".tang-title",r)[0]).$mappingDom("body",baidu(".tang-body",r)[0]),baidu.dom(t.getElement("title")).on(t._options.selectEvent,n),t.on("ondispose",function(){baidu.dom(t.getElement("title")).off(t._options.selectEvent,n)}),t.select(t._selectedIndex)})},{type:"magic.control.Tab",superClass:magic.Base}).extend({_toggleHandler:function(e){function r(){var e=baidu.dom(n).closest(".tang-title-item").get(0),r=baidu.dom(t.getElement("title")).children(),i=r.length,s=0;if(!e)return;for(var o=0;o<i;o++)if(r[o]===e){s=o;break}t._selectedIndex!=s&&t.select(s)}if(e.target.className=="tang-title")return;var t=this,n=e.target;/^(on)?mouseover$/i.test(t._options.selectEvent)?(clearTimeout(t._timeOut),t._timeOut=setTimeout(r,t._options.selectDelay)):r()},select:function(e){var t=this,n=baidu.dom(t.getElement("title")).children(),r=baidu.dom(t.getElement("body")).children();if(!t.fire("onbeforeselect",{index:t._selectedIndex}))return;baidu.dom(n[t._selectedIndex]).removeClass("tang-title-item-selected"),baidu.dom(r[t._selectedIndex]).removeClass("tang-body-item-selected"),t._selectedIndex=e,baidu.dom(n[e]).addClass("tang-title-item-selected"),baidu.dom(r[e]).addClass("tang-body-item-selected"),t.fire("onselect",{index:t._selectedIndex})},getCurrentTitle:function(){var e=this;return baidu.dom(e.getElement("title")).children()[e._selectedIndex]},getCurrentContent:function(){var e=this;return baidu.dom(e.getElement("body")).children()[e._selectedIndex]},$dispose:function(){var e=this;if(e.disposed)return;magic.Base.prototype.$dispose.call(e)}}),magic.Tab=baidu.lang.createClass(function(e){var t=this;t._items=e.items||[]},{type:"magic.Tab",superClass:magic.control.Tab}).extend({tplTitle:'<li class="#{titleClass}"><a href="#" onclick="return false" hidefocus="true"><span>#{content}</span></a></li>',tplBody:'<div class="#{bodyClass}">#{content}</div>',toHTMLString:function(){var e=this,t='<ul class="#{titleClass}">#{titleContent}</ul><div class="#{bodyClass}">#{bodyContent}</div>',n=[],r=[];return baidu(e._items).each(function(t,i){n.push(baidu.string.format(e.tplTitle,{titleClass:"tang-title-item"+(e._selectedIndex==t?" tang-title-item-selected":""),content:i.title})),r.push(baidu.string.format(e.tplBody,{bodyClass:"tang-body-item"+(e._selectedIndex==t?" tang-body-item-selected":""),content:i.content}))}),baidu.string.format(t,{titleClass:"tang-title",titleContent:n.join(""),bodyClass:"tang-body",bodyContent:r.join("")})},render:function(e){var t=this,n;if(t.getElement())return;t.$mappingDom("",baidu.dom("#"+e).get(0)||document.body),n=t.getElement(),baidu.dom(n).addClass("tang-ui tang-tab"),baidu.dom(n).append(t.toHTMLString()),t.fire("onload")},$dispose:function(){var e=this,t,n;if(e.disposed)return;t=e.getElement("title"),n=e.getElement("body"),baidu.dom(e.getElement()).removeClass("tang-ui tang-tab"),magic.Base.prototype.$dispose.call(e),baidu.dom(t).remove(),baidu.dom(n).remove(),t=n=null}}),magic.setup.tab=function(e,t){var n=magic.setup(baidu.dom("#"+e).get(0),magic.control.Tab,t);return n.fire("onload"),n},baidu.dom.extend({one:function(e,t,n,r){return this.on(e,t,n,r,1)}}),baidu._util_.smartScroll=function(e){function i(e){return e&&e.nodeType===9}function s(e){return baidu.type(e)=="Window"?e:i(e)?e.defaultView||e.parentWindow:!1}var t={scrollLeft:"pageXOffset",scrollTop:"pageYOffset"}[e],n=e==="scrollLeft",r={};return{get:function(n){var r=s(n);return r?t in r?r[t]:baidu.browser.isStrict&&r.document.documentElement[e]||r.document.body[e]:n[e]},set:function(t,r){if(!t)return;var i=s(t);i?i.scrollTo(n?r:this.get(t),n?this.get(t):r):t[e]=r}}},baidu.dom.extend({scrollTop:function(){var e=baidu._util_.smartScroll("scrollTop");return function(t){return t&&baidu.check("^(?:number|string)$","baidu.dom.scrollTop"),this.size()<=0?t===undefined?0:this:t===undefined?e.get(this[0]):e.set(this[0],t)||this}}()}),baidu.dom.extend({outerWidth:function(e){if(this.size()<=0)return 0;var t=this[0],n=t!=null&&t===t.window?"window":t.nodeType===9?"document":!1;return n?baidu._util_.getWindowOrDocumentWidthOrHeight(t,n,"width"):baidu._util_.getWidthOrHeight(t,"width","padding|border"+(e?"|margin":""))}}),baidu.dom.extend({innerWidth:function(){if(this.size()<=0)return 0;var e=this[0],t=e!=null&&e===e.window?"window":e.nodeType===9?"document":!1;return t?baidu._util_.getWindowOrDocumentWidthOrHeight(e,t,"width"):baidu._util_.getWidthOrHeight(e,"width","padding")}}),baidu.dom.extend({outerHeight:function(e){if(this.size()<=0)return 0;var t=this[0],n=t!=null&&t===t.window?"window":t.nodeType===9?"document":!1;return n?baidu._util_.getWindowOrDocumentWidthOrHeight(t,n,"height"):baidu._util_.getWidthOrHeight(t,"height","padding|border"+(e?"|margin":""))}}),baidu.dom.extend({innerHeight:function(){if(this.size()<=0)return 0;var e=this[0],t=e!=null&&e===e.window?"window":e.nodeType===9?"document":!1;return t?baidu._util_.getWindowOrDocumentWidthOrHeight(e,t,"height"):baidu._util_.getWidthOrHeight(e,"height","padding")}}),magic.control.ScrollPanel=baidu.lang.createClass(function(e){var t=this;t._active=!1,t._options=baidu.extend({autoUpdateDelay:500,arrowButtonStep:20,mousewheelStep:50,scrollbarStep:80,intervalScrollDelay:300,intervalScrollFreq:100,scrollbarMinHeight:10},e),t.on("load",function(){var e=t._target=baidu(t.getElement("target")),n=t._options;e.addClass("tang-scrollpanel"),t.on("installpanel",t._installSlider),t.on("uninstallpanel",t._uninstallSlider),t._installPanel(),t.update(),n.autoUpdateDelay&&function(){var e=arguments.callee;t._updateTimer=setTimeout(function(){t.update(),e()},n.autoUpdateDelay)}()})},{type:"magic.control.ScrollPanel",superClass:magic.Base}).extend({_installPanel:function(){function i(n){if(!e._active)return;n.preventDefault(),e.scrollBy(n.wheelDelta>0?-t.mousewheelStep:t.mousewheelStep)}var e=this,t=e._options,n=baidu('<div id="'+e.$getId("wrapper")+'" class="tang-scrollpanel-wrapper"></div>').css({width:e._target.width(),height:e._target.height()}),r=baidu('<div id="'+e.$getId("content")+'" class="tang-scrollpanel-content"></div>');r.append(e._target.children()),n.append(r),e._target.append(n),n.on("mousewheel",i),e.on("dispose",function(){n.off("mousewheel",i)}),e.fire("installpanel")},_uninstallPanel:function(){var e=this;e._target.append(baidu(e.getElement("content")).children()).removeClass("tang-scrollpanel"),baidu(e.getElement("wrapper")).remove(),e.fire("uninstallpanel")},_installSlider:function(){var e=this,t=baidu(e.getElement("wrapper")),n=baidu('<div id="'+e.$getId("slider")+'"></div>').css({height:e._target.height()}),r;t.append(n),e._slider=r=new magic.Slider({orientation:"vertical",currentValue:0}),r.on("change",function(t){e.scrollTo(e._pctToPixel(t.value))}),r.render(e.$getId("slider")),e._hackSlider()},_hackSlider:function(){function a(n,r){n.stopPropagation(),n.preventDefault(),e.scrollBy(r);var s,o,u=function(e){e.preventDefault()},a=function(e){e.target.releaseCapture?e.target.releaseCapture():window.releaseEvents&&window.releaseEvents(Event.MOUSEMOVE|Event.MOUSEUP)},f=function(){clearInterval(s),clearInterval(o),baidu(document).off("mouseup",f),baidu(document).off("selectstart",u),a(n)};s=setTimeout(function(){o=setInterval(function(){if(r<0&&n.pageY>i.offset().top||r>0&&n.pageY<i.offset().top+i.outerHeight()){f();return}e.scrollBy(r)},t.intervalScrollFreq)},t.intervalScrollDelay),baidu(document).on("mouseup",f),baidu(document).on("selectstart",u),n.target.setCapture?n.target.setCapture():window.captureEvents&&window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP)}var e=this,t=e._options,n=baidu(e.getElement("slider")),r=e._slider,i=baidu(r.getElement("knob")),s=r.getElement("view"),o=baidu(".tang-start",s),u=baidu(".tang-last",s),s=baidu(s);e.$mappingDom("arrowTop",o.get(0)),e.$mappingDom("arrowBottom",u.get(0)),n.append(o),n.append(u),s.css({width:i.outerWidth()});var f=function(e){var n=e.target==o.get(0)?-1:1;a(e,n*t.arrowButtonStep)},l=function(e){if(e.target==r.getElement("knob"))return;e.pageY<i.offset().top?a(e,-t.scrollbarStep):e.pageY>i.offset().top+i.outerHeight()&&a(e,t.scrollbarStep)};o.on("mousedown",f),u.on("mousedown",f),n.on("mousedown",l),e.on("dispose",function(){o.off("mousedown",f),u.off("mousedown",f),n.off("mousedown",l)}),r.on("beforeslideclick",function(e){e.returnValue=!1})},_uninstallSlider:function(){this._slider&&this._slider.$dispose()},_resetSliderUnitsPos:function(){var e=this,t=e._options,n=baidu(e._slider.getElement("view")),r=baidu(e._slider.getElement("knob")),i=baidu(e.getElement("content")),s=e.getElement("slider"),o=baidu(".tang-start",s),u=baidu(".tang-last",s),a=o.css("display")=="none"?0:o.outerHeight(),f=u.css("display")=="none"?0:u.outerHeight(),s=baidu(s),l=Math.round(e._target.height()/i.outerHeight()*(s.height()-a-f));r.css({height:l>t.scrollbarMinHeight?l:t.scrollbarMinHeight}),n.css({top:a,height:s.height()-f-a-r.outerHeight()}),baidu.browser.ie<7&&(s.height()%2!=0&&u.css({bottom:-1}),n.height()%2!=0&&(n.css({height:n.height()+1}),r.css({height:r.height()-1})))},_pixelToPct:function(e){return e/(baidu(this.getElement("content")).height()-baidu(this.getElement("wrapper")).height())},_pctToPixel:function(e){return(baidu(this.getElement("content")).height()-baidu(this.getElement("wrapper")).height())*e},_setActive:function(){var e=this,t=baidu(e.getElement("slider")),n=baidu(e._slider.getElement("view")),r=baidu(e.getElement("content")),i=baidu(e.getElement("wrapper"));t.show(),t.css({width:n.width()}),r.css({width:i.width()-t.width()}),e._resetSliderUnitsPos(),e._active=!0,e._oldContentHeight=r.outerHeight()},_setInactive:function(){var e=this,t=baidu(e.getElement("slider")),n=baidu(e.getElement("content"));n.css({width:n.width()+t.width()}),t.hide(),e._active=!1},update:function(){var e=this;e._isScrollable(e._target).y?e._active?e._oldContentHeight!=baidu(e.getElement("content")).outerHeight()&&(e._resetSliderUnitsPos(),e._oldContentHeight=baidu(e.getElement("content")).outerHeight(),e._scrollTo(e.getScroll())):e._setActive():e._active&&(e._setInactive(),e.scrollTo(0))},clearAutoUpdate:function(){if(!this._updateTimer)return;clearTimeout(this._updateTimer),delete this._updateTimer},_isScrollable:function(){var e=this,t=e._target,n=t.innerWidth(),r=t.innerHeight(),i=baidu(e.getElement("content")).innerWidth()>n,s=baidu(e.getElement("content")).innerHeight()>r;return{x:i,y:s}},scrollTo:function(e){var t=this,n=e,r=baidu(t.getElement("wrapper")),i=baidu(t.getElement("content")),s=r.height(),o=i.outerHeight();e>o-s&&(e=o-s),e<0&&(e=0);if(t.getScroll()==e)return;t.fire("beforescroll",{pos:e}),t._scrollTo(e),t.fire("afterscroll",{pos:e})},_scrollTo:function(e){var t=this,n=t._slider;baidu(t.getElement("content")).css({top:-e}),n.un("change"),n.setValue(t._pixelToPct(e)),n.on("change",function(e){t.scrollTo(t._pctToPixel(e.value))})},scrollToTop:function(){return this.scrollTo(0),this},scrollToBottom:function(){return this.scrollTo(baidu(this.getElement("content")).height()),this},scrollToElement:function(e){var t=baidu(e).offset().top-baidu(this.getElement("content")).offset().top;return this.scrollTo(t),this},scrollBy:function(e){return this.scrollTo(this.getScroll()+e),this},getScroll:function(){return-Math.round(parseFloat(baidu(this.getElement("content")).css("top")))},getScrollPct:function(){var e=baidu(this.getElement("content")).outerHeight()-baidu(this.getElement("wrapper")).height();return Math.round(this.getScroll()/e*100)/100},$dispose:function(){var e=this;if(e.disposed)return;e.clearAutoUpdate(),e._uninstallPanel(),magic.Base.prototype.$dispose.call(e)}}),magic.setup.scrollPanel=function(e,t){baidu.type(e)==="string"&&(e="#"+e);var e=baidu(e)[0],n=magic.setup(e,magic.control.ScrollPanel,t);return n.$mappingDom("target",e),n.fire("load"),n},baidu.dom.extend({parent:function(e){var t=[];return baidu.forEach(this,function(e){(e=e.parentNode)&&e.nodeType==1&&t.push(e)}),this.pushStack(baidu.dom.match(t,e))}}),magic.control.Tooltip=baidu.lang.createClass(function(e){var t=this,n=t._options=baidu.object.extend({autoHide:!0,hasCloseBtn:!0,hasArrow:!0,offsetX:0,offsetY:0,target:null,content:"",showEvent:"mouseover,focus",hideEvent:"mouseout,blur",position:"bottom",arrowPosition:null},e||{});t._isShow=!1,t._refresh=!1,t.styleBox=!0,t.on("load",function(){t._posInfo=baidu.array(["top","bottom","left","right"]),t._posCache={},t._eventList=[],t.arrowPosGap={top:1,bottom:5,left:3,right:5};var e=t._eventDeal=function(e,n,r,i){e=e&&baidu.string(e).trim(),e=e.replace(","," ");if(e){var s=function(){r.off(e,n)};r.on(e,n),i?i.push(s):t.on("dispose",s)}},r=function(){t._refresh=!0,n.autoHide&&t.hide()},i=27,s=baidu.fn.bind("show",t),o=baidu.fn.bind("hide",t);t._bindCustomEvent(n.target),n.hasCloseBtn?e("click",o,baidu(t.getElement("close"))):baidu(t.getElement("close")).hide(),n.autoHide&&(e("scroll",o,baidu(document))||e("click",o,baidu(document))||e("keydown",function(e){e.keyCode==i&&t.hide()},baidu(document))),e("resize",r,baidu(window)),t.on("dispose",function(){for(var e=0,n=t._eventList.length;e<n;e++)t._eventList[e].call(t)});var u=baidu(t.getElement("arrow"));n.hasArrow&&u.addClass("arrow-"+t._getOpositePos(n.position))||u.hide(),n.content&&t._setContent(n.content);var a=0,f=/<img\s[\w\=\"\/\.\_\:]*\/?>\w*(<\/img>)?/ig;typeof n.content=="string"&&f.test(n.content)&&(a=150),setTimeout(function(){t.reposition()},a)})},{type:"magic.control.Tooltip",superClass:magic.Base}).extend({_calcTop:function(e,t,n,r){var i=parseFloat(e.css("margin-left")),s=parseFloat(e.css("margin-top")),o=this._options;return isNaN(i)&&(i=0),isNaN(s)&&(s=0),{top:t.top+s-n.outerHeight(!0)-(o.hasArrow?r.outerHeight(!0)-this.arrowPosGap.bottom:0)+o.offsetY,left:t.left+i+o.offsetX,position:"top"}},_calcArrowTop:function(e,t){return this._arrowPos("left","bottom",{start:2,end:e.outerWidth(!0)-t.outerWidth(!0)-7,gap:this.arrowPosGap.bottom},!0)},_calcBottom:function(e,t,n,r){var i=parseFloat(e.css("margin-left")),s=parseFloat(e.css("margin-bottom")),o=this._options;return isNaN(i)&&(i=0),isNaN(s)&&(s=0),{top:t.top-s+e.outerHeight(!0)+(o.hasArrow?r.outerHeight(!0)-this.arrowPosGap.top:0)+o.offsetY,left:t.left+i+o.offsetX,position:"bottom"}},_calcArrowBottom:function(e,t){return this._arrowPos("left","top",{start:2,end:e.outerWidth(!0)-t.outerWidth(!0)-7,gap:this.arrowPosGap.top},!0)},_calcLeft:function(e,t,n,r){var i=parseFloat(e.css("margin-left")),s=parseFloat(e.css("margin-top")),o=this._options;return isNaN(i)&&(i=0),isNaN(s)&&(s=0),{top:t.top+s+o.offsetY,left:t.left+i-n.outerWidth(!0)-(o.hasArrow?r.outerWidth(!0)-this.arrowPosGap.right:0)+o.offsetX,position:"left"}},_calcArrowLeft:function(e,t){return this._arrowPos("top","right",{start:2,end:e.outerHeight(!0)-t.outerHeight(!0)-7,gap:this.arrowPosGap.right})},_calcRight:function(e,t,n,r){var i=parseFloat(e.css("margin-right")),s=parseFloat(e.css("margin-top")),o=this._options;return isNaN(i)&&(i=0),isNaN(s)&&(s=0),{top:t.top+s+o.offsetY,left:t.left+e.outerWidth(!0)-i+(o.hasArrow?r.outerWidth(!0)-this.arrowPosGap.left:0)+o.offsetX,position:"right"}},_calcArrowRight:function(e,t){return this._arrowPos("top","left",{start:2,end:e.outerHeight(!0)-t.outerHeight(!0)-7,gap:this.arrowPosGap.left})},_arrowPos:function(e,t,n,r){var i=this,s=i._options,o=s.arrowPosition,u=baidu(i.getElement("arrow")),a=baidu(s.target),f=baidu(i.getElement("")),l=r?"outerWidth":"outerHeight",c=r?-u.outerHeight(!0):-u.outerWidth(!0),h=a[l]()-u[l](),p=/\d+%/ig,d={};return o&&p.test(o)&&(o=f[l](!0)*parseFloat(o)*.01),o&&typeof o!="number"&&(o=parseFloat(o)),o===null&&(o=(h>>1)-(r?s.offsetX:s.offsetY)),o<n.start&&(o=n.start),o>n.end&&(o=n.end),d[e]=o,d[t]=c+n.gap,d},_clearArrowClass:function(){var e=baidu(this.getElement("arrow"));baidu.forEach(this._posInfo,function(t){e.removeClass("arrow-"+t)})},_posControl:function(e,t,n,r,i,s){var o=this,u=o[o._CamelCaseName("_calc",e)](t,n,r,i,s);if(s)return u;var a=r.offsetParent(),f={w:a.outerWidth(!0),h:a.outerHeight(!0)};o._posCache[e]=1;if(u.left>=0&&u.left+r.outerWidth(!0)<=f.w&&u.top>=0&&u.top+r.outerHeight(!0)<=f.h)return u;var l=o._getFuturePos(e);return o._posCache[l]?u:o._posControl(l,t,n,r,i)},_getFuturePos:function(e){return this._getOpositePos(e)},_getOpositePos:function(e){var t=this._posInfo.indexOf(e);return this._posInfo[t%2==0?t+1:t-1]},_CamelCaseName:function(e,t){return e+t.charAt(0).toUpperCase()+t.substr(1)},reposition:function(){var e=this,t=e._options,n=baidu(e.getElement("")),r=baidu(e.getElement("arrow")),i=baidu(t.target),s=i.position(),o=e._posControl(t.position,i,s,n,r);n.css("left",o.left),n.css("top",o.top),e._posCache={};if(!t.hasArrow)return;e._clearArrowClass(),r.addClass("arrow-"+e._getOpositePos(o.position)),o=e[e._CamelCaseName("_calcArrow",o.position)](n,r),r.css("top",o.top==undefined?null:o.top),r.css("left",o.left==undefined?null:o.left),r.css("bottom",o.bottom==undefined?null:o.bottom),r.css("right",o.right==undefined?null:o.right)},_setContent:function(e){var t=baidu(this.getElement("content")),n=this._options;n.content=e,t.empty(),typeof e=="function"?t.html(e(n.target)):t.append(e)},_bindCustomEvent:function(e){var t=this,n=t._options,r=baidu.fn.bind("show",t),i=baidu.fn.bind("hide",t);for(var s=0,o=t._eventList.length;s<o;s++)t._eventList[s].call(t);t._eventDeal(n.showEvent,r,baidu(e),t._eventList),t._eventDeal(n.hideEvent,i,baidu(e),t._eventList)},show:function(){var e=this,t=e._options;if(e._isShow)return;if(e.fire("beforeshow")===!1)return;e._refresh&&((e._refresh=!1)||e.reposition()),typeof t.content=="function"&&e._setContent(t.content),baidu(e.getElement("")).show(),e._isShow=!0,e.fire("show")},hide:function(){if(!this._isShow)return;if(this.fire("beforehide")===!1)return;baidu(this.getElement("")).hide(),this._isShow=!1,this.fire("hide")},setTarget:function(e){var t=this,n=t._options;if(e==n.target)return;t._bindCustomEvent(e),n.target=e,t.reposition(),t.fire("targetchange",{target:e})},setContent:function(e){var t=this,n=t._options;if(n.content==e)return;if(!e||n.content&&e.toString()==n.content.toString())return;t._setContent(e)},setPosition:function(e){var t=this,n=baidu(t.getElement(""));e.x&&n.css("left",parseFloat(e.x)),e.y&&n.css("top",parseFloat(e.y))},$dispose:function(){var e=this.getElement("");magic.Base.prototype.$dispose.call(this),e.parentNode.removeChild(e)}}),baidu.lang.register(magic.Background,function(e){this.styleBox&&(this._innerHTML=["<table borde='0' cellpadding='0' cellspacing='0' ",baidu.browser.ie<7?"class='gif__' ":"","style='width:100%;height:100%;'>","<tr class='top__'>","<td class='left__ corner__'>&nbsp;</td>","<td class='center__ vertical__'>&nbsp;</td>","<td class='right__ corner__'>&nbsp;</td>","</tr>","<tr class='middle__'>","<td class='left__ horizontal__'>&nbsp;</td>","<td class='center__ midland__'>",this._innerHTML||"&nbsp;","</td>","<td class='right__ horizontal__'>&nbsp;</td>","</tr>","<tr class='bottom__'>","<td class='left__ corner__'>&nbsp;</td>","<td class='center__ vertical__'>&nbsp;</td>","<td class='right__ corner__'>&nbsp;</td>","</tr>","</table>"].join(""))}),magic.Tooltip=baidu.lang.createClass(function(e){},{type:"magic.Tooltip",superClass:magic.control.Tooltip}).extend({render:function(e){var t=this,n=t._options;baidu.type(e)==="string"&&(e="#"+e),e=baidu(e)[0],e||(e=n.target&&n.target.parentNode||(n.target=document.body)),n.target||(n.target=e);var r=magic.Tooltip.template.join("");baidu(e).append(baidu.string.format(r,{containerId:t.$getId(""),closeId:t.$getId("close"),contentId:t.$getId("content"),arrowId:t.$getId("arrow")}));var i=t.getElement("");baidu(i).hide(),i.style.zIndex=baidu.global.getZIndex("popup"),t.background=new magic.Background({coverable:!0,styleBox:t.styleBox}),t.background.render(i),t.on("dispose",function(){t.background.$dispose()}),t.fire("load")}
}),magic.Tooltip.template=["<div class='magic-tooltip magic-ui' id='#{containerId}'>","<div class='tang-foreground'>","<div class='magic-tooltip-close' id='#{closeId}'><a href='' onmousedown='event.stopPropagation && event.stopPropagation(); event.cancelBubble = true; return false;' onclick='return false;'></a></div>","<div class='magic-tooltip-content' id='#{contentId}'></div>","<div class='magic-tooltip-arrow' id='#{arrowId}'></div>","</div>","</div>"],magic.setup.tooltip=function(e,t){baidu.type(e)==="string"&&(e="#"+e),e=baidu(e)[0];var n=t||{};n.target||(n.target=document.body);var r=magic.setup(e,magic.control.Tooltip,n),i=r.getElement();return i.style.zIndex=baidu.global.getZIndex("popup"),r.background=new magic.Background({coverable:!0,styleBox:!0}),r.background.render(i),r.on("dispose",function(){r.background.$dispose()}),r.$mappingDom("",baidu(".magic-tooltip",i)[0]),r.$mappingDom("close",baidu(".magic-tooltip-close",i)[0]),r.$mappingDom("closeBtn",baidu("a",r.getElement("close"))[0]),r.$mappingDom("content",baidu(".magic-tooltip-content",i)[0]),r.$mappingDom("arrow",baidu(".magic-tooltip-arrow",r.getElement("body"))[0]),r._isShow=!0,r.hide(),r.fire("load"),r};